<!DOCTYPE html>

<html>
<head>
  <title>nedb.min.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="../../../../docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
    <ul class="sections">
        
          <li id="title">
              <div class="annotation">
                  <h1>nedb.min.js</h1>
              </div>
          </li>
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>!<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{<span class="hljs-keyword">if</span>(<span class="hljs-string">"function"</span>==<span class="hljs-keyword">typeof</span> bootstrap)bootstrap(<span class="hljs-string">"nedb"</span>,t);<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(<span class="hljs-string">"object"</span>==<span class="hljs-keyword">typeof</span> exports)<span class="hljs-built_in">module</span>.exports=t();<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(<span class="hljs-string">"function"</span>==<span class="hljs-keyword">typeof</span> define&amp;&amp;define.amd)define(t);<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(<span class="hljs-string">"undefined"</span>!=<span class="hljs-keyword">typeof</span> ses){<span class="hljs-keyword">if</span>(!ses.ok())<span class="hljs-keyword">return</span>;ses.makeNedb=t}<span class="hljs-keyword">else</span><span class="hljs-string">"undefined"</span>!=<span class="hljs-keyword">typeof</span> <span class="hljs-built_in">window</span>?<span class="hljs-built_in">window</span>.Nedb=t():global.Nedb=t()}(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{<span class="hljs-keyword">var</span> t;<span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e,n)</span></span>{<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">r</span><span class="hljs-params">(n,o)</span></span>{<span class="hljs-keyword">if</span>(!e[n]){<span class="hljs-keyword">if</span>(!t[n]){<span class="hljs-keyword">var</span> u=<span class="hljs-string">"function"</span>==<span class="hljs-keyword">typeof</span> <span class="hljs-built_in">require</span>&amp;&amp;<span class="hljs-built_in">require</span>;<span class="hljs-keyword">if</span>(!o&amp;&amp;u)<span class="hljs-keyword">return</span> u(n,!<span class="hljs-number">0</span>);<span class="hljs-keyword">if</span>(i)<span class="hljs-keyword">return</span> i(n,!<span class="hljs-number">0</span>);<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">"Cannot find module '"</span>+n+<span class="hljs-string">"'"</span>)}<span class="hljs-keyword">var</span> a=e[n]={exports:{}};t[n][<span class="hljs-number">0</span>].call(a.exports,<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span></span>{<span class="hljs-keyword">var</span> i=t[n][<span class="hljs-number">1</span>][e];<span class="hljs-keyword">return</span> r(i?i:e)},a,a.exports)}<span class="hljs-keyword">return</span> e[n].exports}<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i=<span class="hljs-string">"function"</span>==<span class="hljs-keyword">typeof</span> <span class="hljs-built_in">require</span>&amp;&amp;<span class="hljs-built_in">require</span>,o=<span class="hljs-number">0</span>;o&lt;n.length;o++)r(n[o]);<span class="hljs-keyword">return</span> r}({<span class="hljs-number">1</span>:[<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e,n)</span></span>{<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">r</span><span class="hljs-params">(t,e)</span></span>{<span class="hljs-keyword">if</span>(t.indexOf)<span class="hljs-keyword">return</span> t.indexOf(e);<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> n=<span class="hljs-number">0</span>;n&lt;t.length;n++)<span class="hljs-keyword">if</span>(e===t[n])<span class="hljs-keyword">return</span> n;<span class="hljs-keyword">return</span>-<span class="hljs-number">1</span>}<span class="hljs-keyword">var</span> i=t(<span class="hljs-string">"__browserify_process"</span>);i.EventEmitter||(i.EventEmitter=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{});<span class="hljs-keyword">var</span> o=n.EventEmitter=i.EventEmitter,u=<span class="hljs-string">"function"</span>==<span class="hljs-keyword">typeof</span> <span class="hljs-built_in">Array</span>.isArray?<span class="hljs-built_in">Array</span>.isArray:<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{<span class="hljs-keyword">return</span><span class="hljs-string">"[object Array]"</span>===<span class="hljs-built_in">Object</span>.prototype.toString.call(t)},a=<span class="hljs-number">10</span>;o.prototype.setMaxListeners=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{<span class="hljs-keyword">this</span>._events||(<span class="hljs-keyword">this</span>._events={}),<span class="hljs-keyword">this</span>._events.maxListeners=t},o.prototype.emit=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{<span class="hljs-keyword">if</span>(<span class="hljs-string">"error"</span>===t&amp;&amp;(!<span class="hljs-keyword">this</span>._events||!<span class="hljs-keyword">this</span>._events.error||u(<span class="hljs-keyword">this</span>._events.error)&amp;&amp;!<span class="hljs-keyword">this</span>._events.error.length))<span class="hljs-keyword">throw</span> <span class="hljs-built_in">arguments</span>[<span class="hljs-number">1</span>]<span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">Error</span>?<span class="hljs-built_in">arguments</span>[<span class="hljs-number">1</span>]:<span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">"Uncaught, unspecified 'error' event."</span>);<span class="hljs-keyword">if</span>(!<span class="hljs-keyword">this</span>._events)<span class="hljs-keyword">return</span>!<span class="hljs-number">1</span>;<span class="hljs-keyword">var</span> e=<span class="hljs-keyword">this</span>._events[t];<span class="hljs-keyword">if</span>(!e)<span class="hljs-keyword">return</span>!<span class="hljs-number">1</span>;<span class="hljs-keyword">if</span>(<span class="hljs-string">"function"</span>==<span class="hljs-keyword">typeof</span> e){<span class="hljs-keyword">switch</span>(<span class="hljs-built_in">arguments</span>.length){<span class="hljs-keyword">case</span> <span class="hljs-number">1</span>:e.call(<span class="hljs-keyword">this</span>);<span class="hljs-keyword">break</span>;<span class="hljs-keyword">case</span> <span class="hljs-number">2</span>:e.call(<span class="hljs-keyword">this</span>,<span class="hljs-built_in">arguments</span>[<span class="hljs-number">1</span>]);<span class="hljs-keyword">break</span>;<span class="hljs-keyword">case</span> <span class="hljs-number">3</span>:e.call(<span class="hljs-keyword">this</span>,<span class="hljs-built_in">arguments</span>[<span class="hljs-number">1</span>],<span class="hljs-built_in">arguments</span>[<span class="hljs-number">2</span>]);<span class="hljs-keyword">break</span>;<span class="hljs-keyword">default</span>:<span class="hljs-keyword">var</span> n=<span class="hljs-built_in">Array</span>.prototype.slice.call(<span class="hljs-built_in">arguments</span>,<span class="hljs-number">1</span>);e.apply(<span class="hljs-keyword">this</span>,n)}<span class="hljs-keyword">return</span>!<span class="hljs-number">0</span>}<span class="hljs-keyword">if</span>(u(e)){<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> n=<span class="hljs-built_in">Array</span>.prototype.slice.call(<span class="hljs-built_in">arguments</span>,<span class="hljs-number">1</span>),r=e.slice(),i=<span class="hljs-number">0</span>,o=r.length;o&gt;i;i++)r[i].apply(<span class="hljs-keyword">this</span>,n);<span class="hljs-keyword">return</span>!<span class="hljs-number">0</span>}<span class="hljs-keyword">return</span>!<span class="hljs-number">1</span>},o.prototype.addListener=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e)</span></span>{<span class="hljs-keyword">if</span>(<span class="hljs-string">"function"</span>!=<span class="hljs-keyword">typeof</span> e)<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">"addListener only takes instances of Function"</span>);<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>._events||(<span class="hljs-keyword">this</span>._events={}),<span class="hljs-keyword">this</span>.emit(<span class="hljs-string">"newListener"</span>,t,e),<span class="hljs-keyword">this</span>._events[t])<span class="hljs-keyword">if</span>(u(<span class="hljs-keyword">this</span>._events[t])){<span class="hljs-keyword">if</span>(!<span class="hljs-keyword">this</span>._events[t].warned){<span class="hljs-keyword">var</span> n;n=<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>!==<span class="hljs-keyword">this</span>._events.maxListeners?<span class="hljs-keyword">this</span>._events.maxListeners:a,n&amp;&amp;n&gt;<span class="hljs-number">0</span>&amp;&amp;<span class="hljs-keyword">this</span>._events[t].length&gt;n&amp;&amp;(<span class="hljs-keyword">this</span>._events[t].warned=!<span class="hljs-number">0</span>,<span class="hljs-built_in">console</span>.error(<span class="hljs-string">"(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit."</span>,<span class="hljs-keyword">this</span>._events[t].length),<span class="hljs-built_in">console</span>.trace())}<span class="hljs-keyword">this</span>._events[t].push(e)}<span class="hljs-keyword">else</span> <span class="hljs-keyword">this</span>._events[t]=[<span class="hljs-keyword">this</span>._events[t],e];<span class="hljs-keyword">else</span> <span class="hljs-keyword">this</span>._events[t]=e;<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>},o.prototype.on=o.prototype.addListener,o.prototype.once=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e)</span></span>{<span class="hljs-keyword">var</span> n=<span class="hljs-keyword">this</span>;<span class="hljs-keyword">return</span> n.on(t,<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">r</span><span class="hljs-params">()</span></span>{n.removeListener(t,r),e.apply(<span class="hljs-keyword">this</span>,<span class="hljs-built_in">arguments</span>)}),<span class="hljs-keyword">this</span>},o.prototype.removeListener=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e)</span></span>{<span class="hljs-keyword">if</span>(<span class="hljs-string">"function"</span>!=<span class="hljs-keyword">typeof</span> e)<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">"removeListener only takes instances of Function"</span>);<span class="hljs-keyword">if</span>(!<span class="hljs-keyword">this</span>._events||!<span class="hljs-keyword">this</span>._events[t])<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;<span class="hljs-keyword">var</span> n=<span class="hljs-keyword">this</span>._events[t];<span class="hljs-keyword">if</span>(u(n)){<span class="hljs-keyword">var</span> i=r(n,e);<span class="hljs-keyword">if</span>(<span class="hljs-number">0</span>&gt;i)<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;n.splice(i,<span class="hljs-number">1</span>),<span class="hljs-number">0</span>==n.length&amp;&amp;<span class="hljs-keyword">delete</span> <span class="hljs-keyword">this</span>._events[t]}<span class="hljs-keyword">else</span> <span class="hljs-keyword">this</span>._events[t]===e&amp;&amp;<span class="hljs-keyword">delete</span> <span class="hljs-keyword">this</span>._events[t];<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>},o.prototype.removeAllListeners=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>===<span class="hljs-built_in">arguments</span>.length?(<span class="hljs-keyword">this</span>._events={},<span class="hljs-keyword">this</span>):(t&amp;&amp;<span class="hljs-keyword">this</span>._events&amp;&amp;<span class="hljs-keyword">this</span>._events[t]&amp;&amp;(<span class="hljs-keyword">this</span>._events[t]=<span class="hljs-literal">null</span>),<span class="hljs-keyword">this</span>)},o.prototype.listeners=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._events||(<span class="hljs-keyword">this</span>._events={}),<span class="hljs-keyword">this</span>._events[t]||(<span class="hljs-keyword">this</span>._events[t]=[]),u(<span class="hljs-keyword">this</span>._events[t])||(<span class="hljs-keyword">this</span>._events[t]=[<span class="hljs-keyword">this</span>._events[t]]),<span class="hljs-keyword">this</span>._events[t]},o.listenerCount=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e)</span></span>{<span class="hljs-keyword">var</span> n;<span class="hljs-keyword">return</span> n=t._events&amp;&amp;t._events[e]?<span class="hljs-string">"function"</span>==<span class="hljs-keyword">typeof</span> t._events[e]?<span class="hljs-number">1</span>:t._events[e].length:<span class="hljs-number">0</span>}},{__browserify_process:<span class="hljs-number">3</span>}],<span class="hljs-number">2</span>:[<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e,n)</span></span>{<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">r</span><span class="hljs-params">(t)</span></span>{<span class="hljs-keyword">return</span> <span class="hljs-built_in">Array</span>.isArray(t)||<span class="hljs-string">"object"</span>==<span class="hljs-keyword">typeof</span> t&amp;&amp;<span class="hljs-string">"[object Array]"</span>===<span class="hljs-built_in">Object</span>.prototype.toString.call(t)}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">i</span><span class="hljs-params">(t)</span></span>{<span class="hljs-string">"object"</span>==<span class="hljs-keyword">typeof</span> t&amp;&amp;<span class="hljs-string">"[object RegExp]"</span>===<span class="hljs-built_in">Object</span>.prototype.toString.call(t)}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">o</span><span class="hljs-params">(t)</span></span>{<span class="hljs-keyword">return</span><span class="hljs-string">"object"</span>==<span class="hljs-keyword">typeof</span> t&amp;&amp;<span class="hljs-string">"[object Date]"</span>===<span class="hljs-built_in">Object</span>.prototype.toString.call(t)}t(<span class="hljs-string">"events"</span>),n.isArray=r,n.isDate=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{<span class="hljs-keyword">return</span><span class="hljs-string">"[object Date]"</span>===<span class="hljs-built_in">Object</span>.prototype.toString.call(t)},n.isRegExp=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{<span class="hljs-keyword">return</span><span class="hljs-string">"[object RegExp]"</span>===<span class="hljs-built_in">Object</span>.prototype.toString.call(t)},n.print=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{},n.puts=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{},n.debug=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{},n.inspect=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e,s,c)</span></span>{<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">f</span><span class="hljs-params">(t,s)</span></span>{<span class="hljs-keyword">if</span>(t&amp;&amp;<span class="hljs-string">"function"</span>==<span class="hljs-keyword">typeof</span> t.inspect&amp;&amp;t!==n&amp;&amp;(!t.constructor||t.constructor.prototype!==t))<span class="hljs-keyword">return</span> t.inspect(s);<span class="hljs-keyword">switch</span>(<span class="hljs-keyword">typeof</span> t){<span class="hljs-keyword">case</span><span class="hljs-string">"undefined"</span>:<span class="hljs-keyword">return</span> h(<span class="hljs-string">"undefined"</span>,<span class="hljs-string">"undefined"</span>);<span class="hljs-keyword">case</span><span class="hljs-string">"string"</span>:<span class="hljs-keyword">var</span> c=<span class="hljs-string">"'"</span>+<span class="hljs-built_in">JSON</span>.stringify(t).replace(<span class="hljs-regexp">/^"|"$/g</span>,<span class="hljs-string">""</span>).replace(<span class="hljs-regexp">/'/g</span>,<span class="hljs-string">"\\'"</span>).replace(<span class="hljs-regexp">/\\"/g</span>,<span class="hljs-string">'"'</span>)+<span class="hljs-string">"'"</span>;<span class="hljs-keyword">return</span> h(c,<span class="hljs-string">"string"</span>);<span class="hljs-keyword">case</span><span class="hljs-string">"number"</span>:<span class="hljs-keyword">return</span> h(<span class="hljs-string">""</span>+t,<span class="hljs-string">"number"</span>);<span class="hljs-keyword">case</span><span class="hljs-string">"boolean"</span>:<span class="hljs-keyword">return</span> h(<span class="hljs-string">""</span>+t,<span class="hljs-string">"boolean"</span>)}<span class="hljs-keyword">if</span>(<span class="hljs-literal">null</span>===t)<span class="hljs-keyword">return</span> h(<span class="hljs-string">"null"</span>,<span class="hljs-string">"null"</span>);<span class="hljs-keyword">var</span> p=u(t),y=e?a(t):p;<span class="hljs-keyword">if</span>(<span class="hljs-string">"function"</span>==<span class="hljs-keyword">typeof</span> t&amp;&amp;<span class="hljs-number">0</span>===y.length){<span class="hljs-keyword">if</span>(i(t))<span class="hljs-keyword">return</span> h(<span class="hljs-string">""</span>+t,<span class="hljs-string">"regexp"</span>);<span class="hljs-keyword">var</span> d=t.name?<span class="hljs-string">": "</span>+t.name:<span class="hljs-string">""</span>;<span class="hljs-keyword">return</span> h(<span class="hljs-string">"[Function"</span>+d+<span class="hljs-string">"]"</span>,<span class="hljs-string">"special"</span>)}<span class="hljs-keyword">if</span>(o(t)&amp;&amp;<span class="hljs-number">0</span>===y.length)<span class="hljs-keyword">return</span> h(t.toUTCString(),<span class="hljs-string">"date"</span>);<span class="hljs-keyword">var</span> g,v,m;<span class="hljs-keyword">if</span>(r(t)?(v=<span class="hljs-string">"Array"</span>,m=[<span class="hljs-string">"["</span>,<span class="hljs-string">"]"</span>]):(v=<span class="hljs-string">"Object"</span>,m=[<span class="hljs-string">"{"</span>,<span class="hljs-string">"}"</span>]),<span class="hljs-string">"function"</span>==<span class="hljs-keyword">typeof</span> t){<span class="hljs-keyword">var</span> b=t.name?<span class="hljs-string">": "</span>+t.name:<span class="hljs-string">""</span>;g=i(t)?<span class="hljs-string">" "</span>+t:<span class="hljs-string">" [Function"</span>+b+<span class="hljs-string">"]"</span>}<span class="hljs-keyword">else</span> g=<span class="hljs-string">""</span>;<span class="hljs-keyword">if</span>(o(t)&amp;&amp;(g=<span class="hljs-string">" "</span>+t.toUTCString()),<span class="hljs-number">0</span>===y.length)<span class="hljs-keyword">return</span> m[<span class="hljs-number">0</span>]+g+m[<span class="hljs-number">1</span>];<span class="hljs-keyword">if</span>(<span class="hljs-number">0</span>&gt;s)<span class="hljs-keyword">return</span> i(t)?h(<span class="hljs-string">""</span>+t,<span class="hljs-string">"regexp"</span>):h(<span class="hljs-string">"[Object]"</span>,<span class="hljs-string">"special"</span>);l.push(t);<span class="hljs-keyword">var</span> w=y.map(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span></span>{<span class="hljs-keyword">var</span> n,i;<span class="hljs-keyword">if</span>(t.__lookupGetter__&amp;&amp;(t.__lookupGetter__(e)?i=t.__lookupSetter__(e)?h(<span class="hljs-string">"[Getter/Setter]"</span>,<span class="hljs-string">"special"</span>):h(<span class="hljs-string">"[Getter]"</span>,<span class="hljs-string">"special"</span>):t.__lookupSetter__(e)&amp;&amp;(i=h(<span class="hljs-string">"[Setter]"</span>,<span class="hljs-string">"special"</span>))),p.indexOf(e)&lt;<span class="hljs-number">0</span>&amp;&amp;(n=<span class="hljs-string">"["</span>+e+<span class="hljs-string">"]"</span>),i||(l.indexOf(t[e])&lt;<span class="hljs-number">0</span>?(i=<span class="hljs-literal">null</span>===s?f(t[e]):f(t[e],s-<span class="hljs-number">1</span>),i.indexOf(<span class="hljs-string">"\n"</span>)&gt;-<span class="hljs-number">1</span>&amp;&amp;(i=r(t)?i.split(<span class="hljs-string">"\n"</span>).map(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{<span class="hljs-keyword">return</span><span class="hljs-string">"  "</span>+t}).join(<span class="hljs-string">"\n"</span>).substr(<span class="hljs-number">2</span>):<span class="hljs-string">"\n"</span>+i.split(<span class="hljs-string">"\n"</span>).map(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{<span class="hljs-keyword">return</span><span class="hljs-string">"   "</span>+t}).join(<span class="hljs-string">"\n"</span>))):i=h(<span class="hljs-string">"[Circular]"</span>,<span class="hljs-string">"special"</span>)),<span class="hljs-string">"undefined"</span>==<span class="hljs-keyword">typeof</span> n){<span class="hljs-keyword">if</span>(<span class="hljs-string">"Array"</span>===v&amp;&amp;e.match(<span class="hljs-regexp">/^\d+$/</span>))<span class="hljs-keyword">return</span> i;n=<span class="hljs-built_in">JSON</span>.stringify(<span class="hljs-string">""</span>+e),n.match(<span class="hljs-regexp">/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/</span>)?(n=n.substr(<span class="hljs-number">1</span>,n.length-<span class="hljs-number">2</span>),n=h(n,<span class="hljs-string">"name"</span>)):(n=n.replace(<span class="hljs-regexp">/'/g</span>,<span class="hljs-string">"\\'"</span>).replace(<span class="hljs-regexp">/\\"/g</span>,<span class="hljs-string">'"'</span>).replace(<span class="hljs-regexp">/(^"|"$)/g</span>,<span class="hljs-string">"'"</span>),n=h(n,<span class="hljs-string">"string"</span>))}<span class="hljs-keyword">return</span> n+<span class="hljs-string">": "</span>+i});l.pop();<span class="hljs-keyword">var</span> k=<span class="hljs-number">0</span>,x=w.reduce(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e)</span></span>{<span class="hljs-keyword">return</span> k++,e.indexOf(<span class="hljs-string">"\n"</span>)&gt;=<span class="hljs-number">0</span>&amp;&amp;k++,t+e.length+<span class="hljs-number">1</span>},<span class="hljs-number">0</span>);<span class="hljs-keyword">return</span> w=x&gt;<span class="hljs-number">50</span>?m[<span class="hljs-number">0</span>]+(<span class="hljs-string">""</span>===g?<span class="hljs-string">""</span>:g+<span class="hljs-string">"\n "</span>)+<span class="hljs-string">" "</span>+w.join(<span class="hljs-string">",\n  "</span>)+<span class="hljs-string">" "</span>+m[<span class="hljs-number">1</span>]:m[<span class="hljs-number">0</span>]+g+<span class="hljs-string">" "</span>+w.join(<span class="hljs-string">", "</span>)+<span class="hljs-string">" "</span>+m[<span class="hljs-number">1</span>]}<span class="hljs-keyword">var</span> l=[],h=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e)</span></span>{<span class="hljs-keyword">var</span> n={bold:[<span class="hljs-number">1</span>,<span class="hljs-number">22</span>],italic:[<span class="hljs-number">3</span>,<span class="hljs-number">23</span>],underline:[<span class="hljs-number">4</span>,<span class="hljs-number">24</span>],inverse:[<span class="hljs-number">7</span>,<span class="hljs-number">27</span>],white:[<span class="hljs-number">37</span>,<span class="hljs-number">39</span>],grey:[<span class="hljs-number">90</span>,<span class="hljs-number">39</span>],black:[<span class="hljs-number">30</span>,<span class="hljs-number">39</span>],blue:[<span class="hljs-number">34</span>,<span class="hljs-number">39</span>],cyan:[<span class="hljs-number">36</span>,<span class="hljs-number">39</span>],green:[<span class="hljs-number">32</span>,<span class="hljs-number">39</span>],magenta:[<span class="hljs-number">35</span>,<span class="hljs-number">39</span>],red:[<span class="hljs-number">31</span>,<span class="hljs-number">39</span>],yellow:[<span class="hljs-number">33</span>,<span class="hljs-number">39</span>]},r={special:<span class="hljs-string">"cyan"</span>,number:<span class="hljs-string">"blue"</span>,<span class="hljs-string">"boolean"</span>:<span class="hljs-string">"yellow"</span>,<span class="hljs-literal">undefined</span>:<span class="hljs-string">"grey"</span>,<span class="hljs-string">"null"</span>:<span class="hljs-string">"bold"</span>,string:<span class="hljs-string">"green"</span>,date:<span class="hljs-string">"magenta"</span>,regexp:<span class="hljs-string">"red"</span>}[e];<span class="hljs-keyword">return</span> r?<span class="hljs-string">"["</span>+n[r][<span class="hljs-number">0</span>]+<span class="hljs-string">"m"</span>+t+<span class="hljs-string">"["</span>+n[r][<span class="hljs-number">1</span>]+<span class="hljs-string">"m"</span>:t};<span class="hljs-keyword">return</span> c||(h=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{<span class="hljs-keyword">return</span> t}),f(t,<span class="hljs-string">"undefined"</span>==<span class="hljs-keyword">typeof</span> s?<span class="hljs-number">2</span>:s)},n.log=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{},n.pump=<span class="hljs-literal">null</span>;<span class="hljs-keyword">var</span> u=<span class="hljs-built_in">Object</span>.keys||<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{<span class="hljs-keyword">var</span> e=[];<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> n <span class="hljs-keyword">in</span> t)e.push(n);<span class="hljs-keyword">return</span> e},a=<span class="hljs-built_in">Object</span>.getOwnPropertyNames||<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{<span class="hljs-keyword">var</span> e=[];<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> n <span class="hljs-keyword">in</span> t)<span class="hljs-built_in">Object</span>.hasOwnProperty.call(t,n)&amp;&amp;e.push(n);<span class="hljs-keyword">return</span> e},s=<span class="hljs-built_in">Object</span>.create||<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e)</span></span>{<span class="hljs-keyword">var</span> n;<span class="hljs-keyword">if</span>(<span class="hljs-literal">null</span>===t)n={__proto__:<span class="hljs-literal">null</span>};<span class="hljs-keyword">else</span>{<span class="hljs-keyword">if</span>(<span class="hljs-string">"object"</span>!=<span class="hljs-keyword">typeof</span> t)<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">TypeError</span>(<span class="hljs-string">"typeof prototype["</span>+<span class="hljs-keyword">typeof</span> t+<span class="hljs-string">"] != 'object'"</span>);<span class="hljs-keyword">var</span> r=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{};r.prototype=t,n=<span class="hljs-keyword">new</span> r,n.__proto__=t}<span class="hljs-keyword">return</span><span class="hljs-string">"undefined"</span>!=<span class="hljs-keyword">typeof</span> e&amp;&amp;<span class="hljs-built_in">Object</span>.defineProperties&amp;&amp;<span class="hljs-built_in">Object</span>.defineProperties(n,e),n};n.inherits=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e)</span></span>{t.super_=e,t.prototype=s(e.prototype,{constructor:{value:t,enumerable:!<span class="hljs-number">1</span>,writable:!<span class="hljs-number">0</span>,configurable:!<span class="hljs-number">0</span>}})};<span class="hljs-keyword">var</span> c=<span class="hljs-regexp">/%[sdj%]/g</span>;n.format=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{<span class="hljs-keyword">if</span>(<span class="hljs-string">"string"</span>!=<span class="hljs-keyword">typeof</span> t){<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> e=[],r=<span class="hljs-number">0</span>;r&lt;<span class="hljs-built_in">arguments</span>.length;r++)e.push(n.inspect(<span class="hljs-built_in">arguments</span>[r]));<span class="hljs-keyword">return</span> e.join(<span class="hljs-string">" "</span>)}<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> r=<span class="hljs-number">1</span>,i=<span class="hljs-built_in">arguments</span>,o=i.length,u=<span class="hljs-built_in">String</span>(t).replace(c,<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{<span class="hljs-keyword">if</span>(<span class="hljs-string">"%%"</span>===t)<span class="hljs-keyword">return</span><span class="hljs-string">"%"</span>;<span class="hljs-keyword">if</span>(r&gt;=o)<span class="hljs-keyword">return</span> t;<span class="hljs-keyword">switch</span>(t){<span class="hljs-keyword">case</span><span class="hljs-string">"%s"</span>:<span class="hljs-keyword">return</span> <span class="hljs-built_in">String</span>(i[r++]);<span class="hljs-keyword">case</span><span class="hljs-string">"%d"</span>:<span class="hljs-keyword">return</span> <span class="hljs-built_in">Number</span>(i[r++]);<span class="hljs-keyword">case</span><span class="hljs-string">"%j"</span>:<span class="hljs-keyword">return</span> <span class="hljs-built_in">JSON</span>.stringify(i[r++]);<span class="hljs-keyword">default</span>:<span class="hljs-keyword">return</span> t}}),a=i[r];o&gt;r;a=i[++r])u+=<span class="hljs-literal">null</span>===a||<span class="hljs-string">"object"</span>!=<span class="hljs-keyword">typeof</span> a?<span class="hljs-string">" "</span>+a:<span class="hljs-string">" "</span>+n.inspect(a);<span class="hljs-keyword">return</span> u}},{events:<span class="hljs-number">1</span>}],<span class="hljs-number">3</span>:[<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e)</span></span>{<span class="hljs-keyword">var</span> n=e.exports={};n.nextTick=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{<span class="hljs-keyword">var</span> t=<span class="hljs-string">"undefined"</span>!=<span class="hljs-keyword">typeof</span> <span class="hljs-built_in">window</span>&amp;&amp;<span class="hljs-built_in">window</span>.setImmediate,e=<span class="hljs-string">"undefined"</span>!=<span class="hljs-keyword">typeof</span> <span class="hljs-built_in">window</span>&amp;&amp;<span class="hljs-built_in">window</span>.postMessage&amp;&amp;<span class="hljs-built_in">window</span>.addEventListener;<span class="hljs-keyword">if</span>(t)<span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{<span class="hljs-keyword">return</span> <span class="hljs-built_in">window</span>.setImmediate(t)};<span class="hljs-keyword">if</span>(e){<span class="hljs-keyword">var</span> n=[];<span class="hljs-keyword">return</span> <span class="hljs-built_in">window</span>.addEventListener(<span class="hljs-string">"message"</span>,<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{<span class="hljs-keyword">if</span>(t.source===<span class="hljs-built_in">window</span>&amp;&amp;<span class="hljs-string">"process-tick"</span>===t.data&amp;&amp;(t.stopPropagation(),n.length&gt;<span class="hljs-number">0</span>)){<span class="hljs-keyword">var</span> e=n.shift();e()}},!<span class="hljs-number">0</span>),<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{n.push(t),<span class="hljs-built_in">window</span>.postMessage(<span class="hljs-string">"process-tick"</span>,<span class="hljs-string">"*"</span>)}}<span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{setTimeout(t,<span class="hljs-number">0</span>)}}(),n.title=<span class="hljs-string">"browser"</span>,n.browser=!<span class="hljs-number">0</span>,n.env={},n.argv=[],n.binding=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">"process.binding is not supported"</span>)},n.cwd=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{<span class="hljs-keyword">return</span><span class="hljs-string">"/"</span>},n.chdir=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">"process.chdir is not supported"</span>)}},{}],<span class="hljs-number">4</span>:[<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e)</span></span>{<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">n</span><span class="hljs-params">(t,e,n)</span></span>{<span class="hljs-keyword">this</span>.db=t,<span class="hljs-keyword">this</span>.query=e||{},n&amp;&amp;(<span class="hljs-keyword">this</span>.execFn=n)}<span class="hljs-keyword">var</span> r=t(<span class="hljs-string">"./model"</span>);n.prototype.limit=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._limit=t,<span class="hljs-keyword">this</span>},n.prototype.skip=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._skip=t,<span class="hljs-keyword">this</span>},n.prototype.sort=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._sort=t,<span class="hljs-keyword">this</span>},n.prototype._exec=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{<span class="hljs-keyword">var</span> e,n,i,o=<span class="hljs-keyword">this</span>.db.getCandidates(<span class="hljs-keyword">this</span>.query),u=[],a=<span class="hljs-number">0</span>,s=<span class="hljs-number">0</span>,c=<span class="hljs-keyword">this</span>;<span class="hljs-keyword">try</span>{<span class="hljs-keyword">for</span>(e=<span class="hljs-number">0</span>;e&lt;o.length;e+=<span class="hljs-number">1</span>)<span class="hljs-keyword">if</span>(r.match(o[e],<span class="hljs-keyword">this</span>.query))<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>._sort)u.push(o[e]);<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>._skip&amp;&amp;<span class="hljs-keyword">this</span>._skip&gt;s)s+=<span class="hljs-number">1</span>;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(u.push(o[e]),a+=<span class="hljs-number">1</span>,<span class="hljs-keyword">this</span>._limit&amp;&amp;<span class="hljs-keyword">this</span>._limit&lt;=a)<span class="hljs-keyword">break</span>}<span class="hljs-keyword">catch</span>(f){<span class="hljs-keyword">return</span> t(f)}<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>._sort){n=<span class="hljs-built_in">Object</span>.keys(<span class="hljs-keyword">this</span>._sort);<span class="hljs-keyword">var</span> l=[];<span class="hljs-keyword">for</span>(e=<span class="hljs-number">0</span>;e&lt;n.length;e++)i=n[e],l.push({key:i,direction:c._sort[i]});u.sort(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e)</span></span>{<span class="hljs-keyword">var</span> n,i,o;<span class="hljs-keyword">for</span>(o=<span class="hljs-number">0</span>;o&lt;l.length;o++)<span class="hljs-keyword">if</span>(n=l[o],i=n.direction*r.compareThings(r.getDotValue(t,n.key),r.getDotValue(e,n.key)),<span class="hljs-number">0</span>!==i)<span class="hljs-keyword">return</span> i;<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>});<span class="hljs-keyword">var</span> h=<span class="hljs-keyword">this</span>._limit||u.length,p=<span class="hljs-keyword">this</span>._skip||<span class="hljs-number">0</span>;u=u.slice(p,p+h)}<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.execFn?<span class="hljs-keyword">this</span>.execFn(<span class="hljs-literal">null</span>,u,t):t(<span class="hljs-literal">null</span>,u)},n.prototype.exec=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{<span class="hljs-keyword">this</span>.db.executor.push({<span class="hljs-string">"this"</span>:<span class="hljs-keyword">this</span>,fn:<span class="hljs-keyword">this</span>._exec,<span class="hljs-built_in">arguments</span>:<span class="hljs-built_in">arguments</span>})},e.exports=n},{<span class="hljs-string">"./model"</span>:<span class="hljs-number">9</span>}],<span class="hljs-number">5</span>:[<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e)</span></span>{<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">n</span><span class="hljs-params">(t)</span></span>{<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> e,e,n=<span class="hljs-keyword">new</span> <span class="hljs-built_in">Array</span>(t),r=<span class="hljs-number">0</span>;t&gt;r;r++)<span class="hljs-number">0</span>==(<span class="hljs-number">3</span>&amp;r)&amp;&amp;(e=<span class="hljs-number">4294967296</span>*<span class="hljs-built_in">Math</span>.random()),n[r]=<span class="hljs-number">255</span>&amp;e&gt;&gt;&gt;((<span class="hljs-number">3</span>&amp;r)&lt;&lt;<span class="hljs-number">3</span>);<span class="hljs-keyword">return</span> n}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">r</span><span class="hljs-params">(t)</span></span>{<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">e</span><span class="hljs-params">(t)</span></span>{<span class="hljs-keyword">return</span> o[<span class="hljs-number">63</span>&amp;t&gt;&gt;<span class="hljs-number">18</span>]+o[<span class="hljs-number">63</span>&amp;t&gt;&gt;<span class="hljs-number">12</span>]+o[<span class="hljs-number">63</span>&amp;t&gt;&gt;<span class="hljs-number">6</span>]+o[<span class="hljs-number">63</span>&amp;t]}<span class="hljs-keyword">var</span> n,r,i,o=<span class="hljs-string">"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"</span>,u=t.length%<span class="hljs-number">3</span>,a=<span class="hljs-string">""</span>;<span class="hljs-keyword">for</span>(i=<span class="hljs-number">0</span>,r=t.length-u;r&gt;i;i+=<span class="hljs-number">3</span>)n=(t[i]&lt;&lt;<span class="hljs-number">16</span>)+(t[i+<span class="hljs-number">1</span>]&lt;&lt;<span class="hljs-number">8</span>)+t[i+<span class="hljs-number">2</span>],a+=e(n);<span class="hljs-keyword">switch</span>(u){<span class="hljs-keyword">case</span> <span class="hljs-number">1</span>:n=t[t.length-<span class="hljs-number">1</span>],a+=o[n&gt;&gt;<span class="hljs-number">2</span>],a+=o[<span class="hljs-number">63</span>&amp;n&lt;&lt;<span class="hljs-number">4</span>],a+=<span class="hljs-string">"=="</span>;<span class="hljs-keyword">break</span>;<span class="hljs-keyword">case</span> <span class="hljs-number">2</span>:n=(t[t.length-<span class="hljs-number">2</span>]&lt;&lt;<span class="hljs-number">8</span>)+t[t.length-<span class="hljs-number">1</span>],a+=o[n&gt;&gt;<span class="hljs-number">10</span>],a+=o[<span class="hljs-number">63</span>&amp;n&gt;&gt;<span class="hljs-number">4</span>],a+=o[<span class="hljs-number">63</span>&amp;n&lt;&lt;<span class="hljs-number">2</span>],a+=<span class="hljs-string">"="</span>}<span class="hljs-keyword">return</span> a}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">i</span><span class="hljs-params">(t)</span></span>{<span class="hljs-keyword">return</span> r(n(<span class="hljs-built_in">Math</span>.ceil(<span class="hljs-built_in">Math</span>.max(<span class="hljs-number">8</span>,<span class="hljs-number">2</span>*t)))).replace(<span class="hljs-regexp">/[+\/]/g</span>,<span class="hljs-string">""</span>).slice(<span class="hljs-number">0</span>,t)}e.exports.uid=i},{}],<span class="hljs-number">6</span>:[<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e)</span></span>{<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">n</span><span class="hljs-params">(t)</span></span>{<span class="hljs-keyword">var</span> e;<span class="hljs-string">"string"</span>==<span class="hljs-keyword">typeof</span> t?(e=t,<span class="hljs-keyword">this</span>.inMemoryOnly=!<span class="hljs-number">1</span>):(t=t||{},e=t.filename,<span class="hljs-keyword">this</span>.inMemoryOnly=t.inMemoryOnly||!<span class="hljs-number">1</span>,<span class="hljs-keyword">this</span>.autoload=t.autoload||!<span class="hljs-number">1</span>),e&amp;&amp;<span class="hljs-string">"string"</span>==<span class="hljs-keyword">typeof</span> e&amp;&amp;<span class="hljs-number">0</span>!==e.length?<span class="hljs-keyword">this</span>.filename=e:(<span class="hljs-keyword">this</span>.filename=<span class="hljs-literal">null</span>,<span class="hljs-keyword">this</span>.inMemoryOnly=!<span class="hljs-number">0</span>),<span class="hljs-keyword">this</span>.persistence=<span class="hljs-keyword">new</span> f({db:<span class="hljs-keyword">this</span>,nodeWebkitAppName:t.nodeWebkitAppName}),<span class="hljs-keyword">this</span>.executor=<span class="hljs-keyword">new</span> u,<span class="hljs-keyword">this</span>.inMemoryOnly&amp;&amp;(<span class="hljs-keyword">this</span>.executor.ready=!<span class="hljs-number">0</span>),<span class="hljs-keyword">this</span>.indexes={},<span class="hljs-keyword">this</span>.indexes._id=<span class="hljs-keyword">new</span> a({fieldName:<span class="hljs-string">"_id"</span>,unique:!<span class="hljs-number">0</span>}),<span class="hljs-keyword">this</span>.autoload&amp;&amp;<span class="hljs-keyword">this</span>.loadDatabase(t.onload||<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{<span class="hljs-keyword">if</span>(t)<span class="hljs-keyword">throw</span> t})}<span class="hljs-keyword">var</span> r=t(<span class="hljs-string">"./customUtils"</span>),i=t(<span class="hljs-string">"./model"</span>),o=t(<span class="hljs-string">"async"</span>),u=t(<span class="hljs-string">"./executor"</span>),a=t(<span class="hljs-string">"./indexes"</span>),s=t(<span class="hljs-string">"util"</span>),c=t(<span class="hljs-string">"underscore"</span>),f=t(<span class="hljs-string">"./persistence"</span>),l=t(<span class="hljs-string">"./cursor"</span>);n.prototype.loadDatabase=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{<span class="hljs-keyword">this</span>.executor.push({<span class="hljs-string">"this"</span>:<span class="hljs-keyword">this</span>.persistence,fn:<span class="hljs-keyword">this</span>.persistence.loadDatabase,<span class="hljs-built_in">arguments</span>:<span class="hljs-built_in">arguments</span>},!<span class="hljs-number">0</span>)},n.prototype.getAllData=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.indexes._id.getAll()},n.prototype.resetIndexes=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{<span class="hljs-keyword">var</span> e=<span class="hljs-keyword">this</span>;<span class="hljs-built_in">Object</span>.keys(<span class="hljs-keyword">this</span>.indexes).forEach(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(n)</span></span>{e.indexes[n].reset(t)})},n.prototype.ensureIndex=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e)</span></span>{<span class="hljs-keyword">var</span> n=e||<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{};<span class="hljs-keyword">if</span>(t=t||{},!t.fieldName)<span class="hljs-keyword">return</span> n({missingFieldName:!<span class="hljs-number">0</span>});<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.indexes[t.fieldName])<span class="hljs-keyword">return</span> n(<span class="hljs-literal">null</span>);<span class="hljs-keyword">this</span>.indexes[t.fieldName]=<span class="hljs-keyword">new</span> a(t);<span class="hljs-keyword">try</span>{<span class="hljs-keyword">this</span>.indexes[t.fieldName].insert(<span class="hljs-keyword">this</span>.getAllData())}<span class="hljs-keyword">catch</span>(r){<span class="hljs-keyword">return</span> <span class="hljs-keyword">delete</span> <span class="hljs-keyword">this</span>.indexes[t.fieldName],n(r)}<span class="hljs-keyword">this</span>.persistence.persistNewState([{$$indexCreated:t}],<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{<span class="hljs-keyword">return</span> t?n(t):n(<span class="hljs-literal">null</span>)})},n.prototype.removeIndex=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e)</span></span>{<span class="hljs-keyword">var</span> n=e||<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{};<span class="hljs-keyword">delete</span> <span class="hljs-keyword">this</span>.indexes[t],<span class="hljs-keyword">this</span>.persistence.persistNewState([{$$indexRemoved:t}],<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{<span class="hljs-keyword">return</span> t?n(t):n(<span class="hljs-literal">null</span>)})},n.prototype.addToIndexes=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{<span class="hljs-keyword">var</span> e,n,r,i=<span class="hljs-built_in">Object</span>.keys(<span class="hljs-keyword">this</span>.indexes);<span class="hljs-keyword">for</span>(e=<span class="hljs-number">0</span>;e&lt;i.length;e+=<span class="hljs-number">1</span>)<span class="hljs-keyword">try</span>{<span class="hljs-keyword">this</span>.indexes[i[e]].insert(t)}<span class="hljs-keyword">catch</span>(o){n=e,r=o;<span class="hljs-keyword">break</span>}<span class="hljs-keyword">if</span>(r){<span class="hljs-keyword">for</span>(e=<span class="hljs-number">0</span>;n&gt;e;e+=<span class="hljs-number">1</span>)<span class="hljs-keyword">this</span>.indexes[i[e]].remove(t);<span class="hljs-keyword">throw</span> r}},n.prototype.removeFromIndexes=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{<span class="hljs-keyword">var</span> e=<span class="hljs-keyword">this</span>;<span class="hljs-built_in">Object</span>.keys(<span class="hljs-keyword">this</span>.indexes).forEach(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(n)</span></span>{e.indexes[n].remove(t)})},n.prototype.updateIndexes=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e)</span></span>{<span class="hljs-keyword">var</span> n,r,i,o=<span class="hljs-built_in">Object</span>.keys(<span class="hljs-keyword">this</span>.indexes);<span class="hljs-keyword">for</span>(n=<span class="hljs-number">0</span>;n&lt;o.length;n+=<span class="hljs-number">1</span>)<span class="hljs-keyword">try</span>{<span class="hljs-keyword">this</span>.indexes[o[n]].update(t,e)}<span class="hljs-keyword">catch</span>(u){r=n,i=u;<span class="hljs-keyword">break</span>}<span class="hljs-keyword">if</span>(i){<span class="hljs-keyword">for</span>(n=<span class="hljs-number">0</span>;r&gt;n;n+=<span class="hljs-number">1</span>)<span class="hljs-keyword">this</span>.indexes[o[n]].revertUpdate(t,e);<span class="hljs-keyword">throw</span> i}},n.prototype.getCandidates=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{<span class="hljs-keyword">var</span> e,n=<span class="hljs-built_in">Object</span>.keys(<span class="hljs-keyword">this</span>.indexes);<span class="hljs-keyword">return</span> e=[],<span class="hljs-built_in">Object</span>.keys(t).forEach(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(n)</span></span>{(<span class="hljs-string">"string"</span>==<span class="hljs-keyword">typeof</span> t[n]||<span class="hljs-string">"number"</span>==<span class="hljs-keyword">typeof</span> t[n]||<span class="hljs-string">"boolean"</span>==<span class="hljs-keyword">typeof</span> t[n]||s.isDate(t[n])||<span class="hljs-literal">null</span>===t[n])&amp;&amp;e.push(n)}),e=c.intersection(e,n),e.length&gt;<span class="hljs-number">0</span>?<span class="hljs-keyword">this</span>.indexes[e[<span class="hljs-number">0</span>]].getMatching(t[e[<span class="hljs-number">0</span>]]):(e=[],<span class="hljs-built_in">Object</span>.keys(t).forEach(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(n)</span></span>{t[n]&amp;&amp;t[n].hasOwnProperty(<span class="hljs-string">"$in"</span>)&amp;&amp;e.push(n)}),e=c.intersection(e,n),e.length&gt;<span class="hljs-number">0</span>?<span class="hljs-keyword">this</span>.indexes[e[<span class="hljs-number">0</span>]].getMatching(t[e[<span class="hljs-number">0</span>]].$<span class="hljs-keyword">in</span>):(e=[],<span class="hljs-built_in">Object</span>.keys(t).forEach(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(n)</span></span>{t[n]&amp;&amp;(t[n].hasOwnProperty(<span class="hljs-string">"$lt"</span>)||t[n].hasOwnProperty(<span class="hljs-string">"$lte"</span>)||t[n].hasOwnProperty(<span class="hljs-string">"$gt"</span>)||t[n].hasOwnProperty(<span class="hljs-string">"$gte"</span>))&amp;&amp;e.push(n)}),e=c.intersection(e,n),e.length&gt;<span class="hljs-number">0</span>?<span class="hljs-keyword">this</span>.indexes[e[<span class="hljs-number">0</span>]].getBetweenBounds(t[e[<span class="hljs-number">0</span>]]):<span class="hljs-keyword">this</span>.getAllData()))},n.prototype._insert=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e)</span></span>{<span class="hljs-keyword">var</span> n=e||<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{};<span class="hljs-keyword">try</span>{<span class="hljs-keyword">this</span>._insertInCache(t)}<span class="hljs-keyword">catch</span>(r){<span class="hljs-keyword">return</span> n(r)}<span class="hljs-keyword">this</span>.persistence.persistNewState(s.isArray(t)?t:[t],<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span></span>{<span class="hljs-keyword">return</span> e?n(e):n(<span class="hljs-literal">null</span>,t)})},n.prototype.prepareDocumentForInsertion=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{<span class="hljs-keyword">var</span> e,n=<span class="hljs-keyword">this</span>;<span class="hljs-keyword">return</span> s.isArray(t)?(e=[],t.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{e.push(n.prepareDocumentForInsertion(t))})):(t._id=t._id||r.uid(<span class="hljs-number">16</span>),e=i.deepCopy(t),i.checkObject(e)),e},n.prototype._insertInCache=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{s.isArray(t)?<span class="hljs-keyword">this</span>._insertMultipleDocsInCache(t):<span class="hljs-keyword">this</span>.addToIndexes(<span class="hljs-keyword">this</span>.prepareDocumentForInsertion(t))},n.prototype._insertMultipleDocsInCache=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{<span class="hljs-keyword">var</span> e,n,r,i=<span class="hljs-keyword">this</span>.prepareDocumentForInsertion(t);<span class="hljs-keyword">for</span>(e=<span class="hljs-number">0</span>;e&lt;i.length;e+=<span class="hljs-number">1</span>)<span class="hljs-keyword">try</span>{<span class="hljs-keyword">this</span>.addToIndexes(i[e])}<span class="hljs-keyword">catch</span>(o){r=o,n=e;<span class="hljs-keyword">break</span>}<span class="hljs-keyword">if</span>(r){<span class="hljs-keyword">for</span>(e=<span class="hljs-number">0</span>;n&gt;e;e+=<span class="hljs-number">1</span>)<span class="hljs-keyword">this</span>.removeFromIndexes(i[e]);<span class="hljs-keyword">throw</span> r}},n.prototype.insert=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{<span class="hljs-keyword">this</span>.executor.push({<span class="hljs-string">"this"</span>:<span class="hljs-keyword">this</span>,fn:<span class="hljs-keyword">this</span>._insert,<span class="hljs-built_in">arguments</span>:<span class="hljs-built_in">arguments</span>})},n.prototype.count=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e)</span></span>{<span class="hljs-keyword">var</span> n=<span class="hljs-keyword">new</span> l(<span class="hljs-keyword">this</span>,t,<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e,n)</span></span>{<span class="hljs-keyword">return</span> t?n(t):n(<span class="hljs-literal">null</span>,e.length)});<span class="hljs-keyword">return</span><span class="hljs-string">"function"</span>!=<span class="hljs-keyword">typeof</span> e?n:(n.exec(e),<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>)},n.prototype.find=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e)</span></span>{<span class="hljs-keyword">var</span> n=<span class="hljs-keyword">new</span> l(<span class="hljs-keyword">this</span>,t,<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e,n)</span></span>{<span class="hljs-keyword">var</span> r,o=[];<span class="hljs-keyword">if</span>(t)<span class="hljs-keyword">return</span> n(t);<span class="hljs-keyword">for</span>(r=<span class="hljs-number">0</span>;r&lt;e.length;r+=<span class="hljs-number">1</span>)o.push(i.deepCopy(e[r]));<span class="hljs-keyword">return</span> n(<span class="hljs-literal">null</span>,o)});<span class="hljs-keyword">return</span><span class="hljs-string">"function"</span>!=<span class="hljs-keyword">typeof</span> e?n:(n.exec(e),<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>)},n.prototype.findOne=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e)</span></span>{<span class="hljs-keyword">var</span> n=<span class="hljs-keyword">new</span> l(<span class="hljs-keyword">this</span>,t,<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e,n)</span></span>{<span class="hljs-keyword">return</span> t?n(t):<span class="hljs-number">1</span>===e.length?n(<span class="hljs-literal">null</span>,i.deepCopy(e[<span class="hljs-number">0</span>])):n(<span class="hljs-literal">null</span>,<span class="hljs-literal">null</span>)});<span class="hljs-keyword">return</span> n.limit(<span class="hljs-number">1</span>),<span class="hljs-string">"function"</span>!=<span class="hljs-keyword">typeof</span> e?n:(n.exec(e),<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>)},n.prototype._update=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e,n,r)</span></span>{<span class="hljs-keyword">var</span> u,a,s,f,h=<span class="hljs-keyword">this</span>,p=<span class="hljs-number">0</span>;<span class="hljs-string">"function"</span>==<span class="hljs-keyword">typeof</span> n&amp;&amp;(r=n,n={}),u=r||<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{},a=<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>!==n.multi?n.multi:!<span class="hljs-number">1</span>,s=<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>!==n.upsert?n.upsert:!<span class="hljs-number">1</span>,o.waterfall([<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(n)</span></span>{<span class="hljs-keyword">if</span>(!s)<span class="hljs-keyword">return</span> n();<span class="hljs-keyword">var</span> r=<span class="hljs-keyword">new</span> l(h,t);r.limit(<span class="hljs-number">1</span>)._exec(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(r,o)</span></span>{<span class="hljs-keyword">return</span> r?u(r):<span class="hljs-number">1</span>===o.length?n():h._insert(i.modify(t,e),<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e)</span></span>{<span class="hljs-keyword">return</span> t?u(t):u(<span class="hljs-literal">null</span>,<span class="hljs-number">1</span>,e)})})},<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{<span class="hljs-keyword">var</span> n,r=h.getCandidates(t),o=[];<span class="hljs-keyword">try</span>{<span class="hljs-keyword">for</span>(f=<span class="hljs-number">0</span>;f&lt;r.length;f+=<span class="hljs-number">1</span>)i.match(r[f],t)&amp;&amp;(a||<span class="hljs-number">0</span>===p)&amp;&amp;(p+=<span class="hljs-number">1</span>,n=i.modify(r[f],e),o.push({oldDoc:r[f],newDoc:n}))}<span class="hljs-keyword">catch</span>(s){<span class="hljs-keyword">return</span> u(s)}<span class="hljs-keyword">try</span>{h.updateIndexes(o)}<span class="hljs-keyword">catch</span>(s){<span class="hljs-keyword">return</span> u(s)}h.persistence.persistNewState(c.pluck(o,<span class="hljs-string">"newDoc"</span>),<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{<span class="hljs-keyword">return</span> t?u(t):u(<span class="hljs-literal">null</span>,p)})}])},n.prototype.update=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{<span class="hljs-keyword">this</span>.executor.push({<span class="hljs-string">"this"</span>:<span class="hljs-keyword">this</span>,fn:<span class="hljs-keyword">this</span>._update,<span class="hljs-built_in">arguments</span>:<span class="hljs-built_in">arguments</span>})},n.prototype._remove=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e,n)</span></span>{<span class="hljs-keyword">var</span> r,o,u=<span class="hljs-keyword">this</span>,a=<span class="hljs-number">0</span>,s=[],c=<span class="hljs-keyword">this</span>.getCandidates(t);<span class="hljs-string">"function"</span>==<span class="hljs-keyword">typeof</span> e&amp;&amp;(n=e,e={}),r=n||<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{},o=<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>!==e.multi?e.multi:!<span class="hljs-number">1</span>;<span class="hljs-keyword">try</span>{c.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span></span>{i.match(e,t)&amp;&amp;(o||<span class="hljs-number">0</span>===a)&amp;&amp;(a+=<span class="hljs-number">1</span>,s.push({$$deleted:!<span class="hljs-number">0</span>,_id:e._id}),u.removeFromIndexes(e))})}<span class="hljs-keyword">catch</span>(f){<span class="hljs-keyword">return</span> r(f)}u.persistence.persistNewState(s,<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{<span class="hljs-keyword">return</span> t?r(t):r(<span class="hljs-literal">null</span>,a)})},n.prototype.remove=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{<span class="hljs-keyword">this</span>.executor.push({<span class="hljs-string">"this"</span>:<span class="hljs-keyword">this</span>,fn:<span class="hljs-keyword">this</span>._remove,<span class="hljs-built_in">arguments</span>:<span class="hljs-built_in">arguments</span>})},e.exports=n},{<span class="hljs-string">"./cursor"</span>:<span class="hljs-number">4</span>,<span class="hljs-string">"./customUtils"</span>:<span class="hljs-number">5</span>,<span class="hljs-string">"./executor"</span>:<span class="hljs-number">7</span>,<span class="hljs-string">"./indexes"</span>:<span class="hljs-number">8</span>,<span class="hljs-string">"./model"</span>:<span class="hljs-number">9</span>,<span class="hljs-string">"./persistence"</span>:<span class="hljs-number">10</span>,async:<span class="hljs-number">11</span>,underscore:<span class="hljs-number">16</span>,util:<span class="hljs-number">2</span>}],<span class="hljs-number">7</span>:[<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e)</span></span>{<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">n</span><span class="hljs-params">()</span></span>{<span class="hljs-keyword">this</span>.buffer=[],<span class="hljs-keyword">this</span>.ready=!<span class="hljs-number">1</span>,<span class="hljs-keyword">this</span>.queue=i.queue(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e)</span></span>{<span class="hljs-keyword">var</span> n,i,o=t.arguments[t.arguments.length-<span class="hljs-number">1</span>],u=[];<span class="hljs-keyword">for</span>(i=<span class="hljs-number">0</span>;i&lt;t.arguments.length;i+=<span class="hljs-number">1</span>)u.push(t.arguments[i]);<span class="hljs-string">"function"</span>==<span class="hljs-keyword">typeof</span> o?(n=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{r.nextTick(e),o.apply(<span class="hljs-literal">null</span>,<span class="hljs-built_in">arguments</span>)},u[u.length-<span class="hljs-number">1</span>]=n):(n=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{e()},u.push(n)),t.fn.apply(t.this,u)},<span class="hljs-number">1</span>)}<span class="hljs-keyword">var</span> r=t(<span class="hljs-string">"__browserify_process"</span>),i=t(<span class="hljs-string">"async"</span>);n.prototype.push=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e)</span></span>{<span class="hljs-keyword">this</span>.ready||e?<span class="hljs-keyword">this</span>.queue.push(t):<span class="hljs-keyword">this</span>.buffer.push(t)},n.prototype.processBuffer=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{<span class="hljs-keyword">var</span> t;<span class="hljs-keyword">for</span>(<span class="hljs-keyword">this</span>.ready=!<span class="hljs-number">0</span>,t=<span class="hljs-number">0</span>;t&lt;<span class="hljs-keyword">this</span>.buffer.length;t+=<span class="hljs-number">1</span>)<span class="hljs-keyword">this</span>.queue.push(<span class="hljs-keyword">this</span>.buffer[t]);<span class="hljs-keyword">this</span>.buffer=[]},e.exports=n},{__browserify_process:<span class="hljs-number">3</span>,async:<span class="hljs-number">11</span>}],<span class="hljs-number">8</span>:[<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e)</span></span>{<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">n</span><span class="hljs-params">(t,e)</span></span>{<span class="hljs-keyword">return</span> t===e}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">r</span><span class="hljs-params">(t)</span></span>{<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>===t?<span class="hljs-string">"$null"</span>:<span class="hljs-string">"string"</span>==<span class="hljs-keyword">typeof</span> t?<span class="hljs-string">"$string"</span>+t:<span class="hljs-string">"boolean"</span>==<span class="hljs-keyword">typeof</span> t?<span class="hljs-string">"$boolean"</span>+t:<span class="hljs-string">"number"</span>==<span class="hljs-keyword">typeof</span> t?<span class="hljs-string">"$number"</span>+t:c.isArray(t)?<span class="hljs-string">"$date"</span>+t.getTime():t}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">i</span><span class="hljs-params">(t)</span></span>{<span class="hljs-keyword">this</span>.fieldName=t.fieldName,<span class="hljs-keyword">this</span>.unique=t.unique||!<span class="hljs-number">1</span>,<span class="hljs-keyword">this</span>.sparse=t.sparse||!<span class="hljs-number">1</span>,<span class="hljs-keyword">this</span>.treeOptions={unique:<span class="hljs-keyword">this</span>.unique,compareKeys:a.compareThings,checkValueEquality:n},<span class="hljs-keyword">this</span>.reset()}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">o</span><span class="hljs-params">(t,e)</span></span>{<span class="hljs-keyword">var</span> n;<span class="hljs-keyword">for</span>(n=<span class="hljs-number">0</span>;n&lt;e.length;n+=<span class="hljs-number">1</span>)t.push(e[n])}<span class="hljs-keyword">var</span> u=t(<span class="hljs-string">"binary-search-tree"</span>).AVLTree,a=t(<span class="hljs-string">"./model"</span>),s=t(<span class="hljs-string">"underscore"</span>),c=t(<span class="hljs-string">"util"</span>);i.prototype.reset=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{<span class="hljs-keyword">this</span>.tree=<span class="hljs-keyword">new</span> u(<span class="hljs-keyword">this</span>.treeOptions),t&amp;&amp;<span class="hljs-keyword">this</span>.insert(t)},i.prototype.insert=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{<span class="hljs-keyword">var</span> e,n,i,o,u;<span class="hljs-keyword">if</span>(c.isArray(t))<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.insertMultipleDocs(t),<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>;<span class="hljs-keyword">if</span>(e=a.getDotValue(t,<span class="hljs-keyword">this</span>.fieldName),<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>!==e||!<span class="hljs-keyword">this</span>.sparse)<span class="hljs-keyword">if</span>(c.isArray(e)){<span class="hljs-keyword">for</span>(n=s.uniq(e,r),i=<span class="hljs-number">0</span>;i&lt;n.length;i+=<span class="hljs-number">1</span>)<span class="hljs-keyword">try</span>{<span class="hljs-keyword">this</span>.tree.insert(n[i],t)}<span class="hljs-keyword">catch</span>(f){u=f,o=i;<span class="hljs-keyword">break</span>}<span class="hljs-keyword">if</span>(u){<span class="hljs-keyword">for</span>(i=<span class="hljs-number">0</span>;o&gt;i;i+=<span class="hljs-number">1</span>)<span class="hljs-keyword">this</span>.tree.delete(n[i],t);<span class="hljs-keyword">throw</span> u}}<span class="hljs-keyword">else</span> <span class="hljs-keyword">this</span>.tree.insert(e,t)},i.prototype.insertMultipleDocs=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{<span class="hljs-keyword">var</span> e,n,r;<span class="hljs-keyword">for</span>(e=<span class="hljs-number">0</span>;e&lt;t.length;e+=<span class="hljs-number">1</span>)<span class="hljs-keyword">try</span>{<span class="hljs-keyword">this</span>.insert(t[e])}<span class="hljs-keyword">catch</span>(i){n=i,r=e;<span class="hljs-keyword">break</span>}<span class="hljs-keyword">if</span>(n){<span class="hljs-keyword">for</span>(e=<span class="hljs-number">0</span>;r&gt;e;e+=<span class="hljs-number">1</span>)<span class="hljs-keyword">this</span>.remove(t[e]);<span class="hljs-keyword">throw</span> n}},i.prototype.remove=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{<span class="hljs-keyword">var</span> e,n=<span class="hljs-keyword">this</span>;<span class="hljs-keyword">return</span> c.isArray(t)?(t.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{n.remove(t)}),<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>):(e=a.getDotValue(t,<span class="hljs-keyword">this</span>.fieldName),<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>===e&amp;&amp;<span class="hljs-keyword">this</span>.sparse||(c.isArray(e)?s.uniq(e,r).forEach(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span></span>{n.tree.delete(e,t)}):<span class="hljs-keyword">this</span>.tree.delete(e,t)),<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>)},i.prototype.update=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e)</span></span>{<span class="hljs-keyword">if</span>(c.isArray(t))<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.updateMultipleDocs(t),<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>;<span class="hljs-keyword">this</span>.remove(t);<span class="hljs-keyword">try</span>{<span class="hljs-keyword">this</span>.insert(e)}<span class="hljs-keyword">catch</span>(n){<span class="hljs-keyword">throw</span> <span class="hljs-keyword">this</span>.insert(t),n}},i.prototype.updateMultipleDocs=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{<span class="hljs-keyword">var</span> e,n,r;<span class="hljs-keyword">for</span>(e=<span class="hljs-number">0</span>;e&lt;t.length;e+=<span class="hljs-number">1</span>)<span class="hljs-keyword">this</span>.remove(t[e].oldDoc);<span class="hljs-keyword">for</span>(e=<span class="hljs-number">0</span>;e&lt;t.length;e+=<span class="hljs-number">1</span>)<span class="hljs-keyword">try</span>{<span class="hljs-keyword">this</span>.insert(t[e].newDoc)}<span class="hljs-keyword">catch</span>(i){r=i,n=e;<span class="hljs-keyword">break</span>}<span class="hljs-keyword">if</span>(r){<span class="hljs-keyword">for</span>(e=<span class="hljs-number">0</span>;n&gt;e;e+=<span class="hljs-number">1</span>)<span class="hljs-keyword">this</span>.remove(t[e].newDoc);<span class="hljs-keyword">for</span>(e=<span class="hljs-number">0</span>;e&lt;t.length;e+=<span class="hljs-number">1</span>)<span class="hljs-keyword">this</span>.insert(t[e].oldDoc);<span class="hljs-keyword">throw</span> r}},i.prototype.revertUpdate=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e)</span></span>{<span class="hljs-keyword">var</span> n=[];c.isArray(t)?(t.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{n.push({oldDoc:t.newDoc,newDoc:t.oldDoc})}),<span class="hljs-keyword">this</span>.update(n)):<span class="hljs-keyword">this</span>.update(e,t)},i.prototype.getMatching=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{<span class="hljs-keyword">var</span> e,n=<span class="hljs-keyword">this</span>;<span class="hljs-keyword">return</span> c.isArray(t)?(e=[],t.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{o(e,n.getMatching(t))}),e):<span class="hljs-keyword">this</span>.tree.search(t)},i.prototype.getBetweenBounds=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.tree.betweenBounds(t)},i.prototype.getAll=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{<span class="hljs-keyword">var</span> t=[];<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.tree.executeOnEveryNode(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span></span>{<span class="hljs-keyword">var</span> n;<span class="hljs-keyword">for</span>(n=<span class="hljs-number">0</span>;n&lt;e.data.length;n+=<span class="hljs-number">1</span>)t.push(e.data[n])}),t},e.exports=i},{<span class="hljs-string">"./model"</span>:<span class="hljs-number">9</span>,<span class="hljs-string">"binary-search-tree"</span>:<span class="hljs-number">12</span>,underscore:<span class="hljs-number">16</span>,util:<span class="hljs-number">2</span>}],<span class="hljs-number">9</span>:[<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e)</span></span>{<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">n</span><span class="hljs-params">(t,e)</span></span>{<span class="hljs-keyword">if</span>(!(<span class="hljs-string">"$"</span>!==t[<span class="hljs-number">0</span>]||<span class="hljs-string">"$$date"</span>===t&amp;&amp;<span class="hljs-string">"number"</span>==<span class="hljs-keyword">typeof</span> e||<span class="hljs-string">"$$deleted"</span>===t&amp;&amp;e===!<span class="hljs-number">0</span>||<span class="hljs-string">"$$indexCreated"</span>===t||<span class="hljs-string">"$$indexRemoved"</span>===t))<span class="hljs-keyword">throw</span><span class="hljs-string">"Field names cannot begin with the $ character"</span>;<span class="hljs-keyword">if</span>(-<span class="hljs-number">1</span>!==t.indexOf(<span class="hljs-string">"."</span>))<span class="hljs-keyword">throw</span><span class="hljs-string">"Field names cannot contain a ."</span>}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">r</span><span class="hljs-params">(t)</span></span>{w.isArray(t)&amp;&amp;t.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{r(t)}),<span class="hljs-string">"object"</span>==<span class="hljs-keyword">typeof</span> t&amp;&amp;<span class="hljs-literal">null</span>!==t&amp;&amp;<span class="hljs-built_in">Object</span>.keys(t).forEach(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span></span>{n(e,t[e]),r(t[e])})}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">i</span><span class="hljs-params">(t)</span></span>{<span class="hljs-keyword">var</span> e;<span class="hljs-keyword">return</span> <span class="hljs-built_in">Date</span>.prototype.toJSON=m,e=<span class="hljs-built_in">JSON</span>.stringify(t,<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e)</span></span>{<span class="hljs-keyword">return</span> n(t,e),<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>===<span class="hljs-keyword">typeof</span> e?<span class="hljs-literal">null</span>:<span class="hljs-string">"string"</span>==<span class="hljs-keyword">typeof</span> e||<span class="hljs-string">"number"</span>==<span class="hljs-keyword">typeof</span> e||<span class="hljs-string">"boolean"</span>==<span class="hljs-keyword">typeof</span> e||<span class="hljs-literal">null</span>===e?e:e}),<span class="hljs-built_in">Date</span>.prototype.toJSON=b,e}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">o</span><span class="hljs-params">(t)</span></span>{<span class="hljs-keyword">return</span> <span class="hljs-built_in">JSON</span>.parse(t,<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e)</span></span>{<span class="hljs-keyword">return</span><span class="hljs-string">"$$date"</span>===t?<span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(e):<span class="hljs-string">"string"</span>==<span class="hljs-keyword">typeof</span> e||<span class="hljs-string">"number"</span>==<span class="hljs-keyword">typeof</span> e||<span class="hljs-string">"boolean"</span>==<span class="hljs-keyword">typeof</span> e||<span class="hljs-literal">null</span>===e?e:e&amp;&amp;e.$$date?e.$$date:e})}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">u</span><span class="hljs-params">(t)</span></span>{<span class="hljs-keyword">var</span> e;<span class="hljs-keyword">return</span><span class="hljs-string">"boolean"</span>==<span class="hljs-keyword">typeof</span> t||<span class="hljs-string">"number"</span>==<span class="hljs-keyword">typeof</span> t||<span class="hljs-string">"string"</span>==<span class="hljs-keyword">typeof</span> t||<span class="hljs-literal">null</span>===t||w.isDate(t)?t:w.isArray(t)?(e=[],t.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{e.push(t)}),e):<span class="hljs-string">"object"</span>==<span class="hljs-keyword">typeof</span> t?(e={},<span class="hljs-built_in">Object</span>.keys(t).forEach(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(n)</span></span>{e[n]=u(t[n])}),e):<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">a</span><span class="hljs-params">(t)</span></span>{<span class="hljs-keyword">return</span><span class="hljs-string">"boolean"</span>==<span class="hljs-keyword">typeof</span> t||<span class="hljs-string">"number"</span>==<span class="hljs-keyword">typeof</span> t||<span class="hljs-string">"string"</span>==<span class="hljs-keyword">typeof</span> t||<span class="hljs-literal">null</span>===t||w.isDate(t)||w.isArray(t)}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">s</span><span class="hljs-params">(t,e)</span></span>{<span class="hljs-keyword">return</span> e&gt;t?-<span class="hljs-number">1</span>:t&gt;e?<span class="hljs-number">1</span>:<span class="hljs-number">0</span>}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">c</span><span class="hljs-params">(t,e)</span></span>{<span class="hljs-keyword">var</span> n,r;<span class="hljs-keyword">for</span>(n=<span class="hljs-number">0</span>;n&lt;<span class="hljs-built_in">Math</span>.min(t.length,e.length);n+=<span class="hljs-number">1</span>)<span class="hljs-keyword">if</span>(r=f(t[n],e[n]),<span class="hljs-number">0</span>!==r)<span class="hljs-keyword">return</span> r;<span class="hljs-keyword">return</span> s(t.length,e.length)}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">f</span><span class="hljs-params">(t,e)</span></span>{<span class="hljs-keyword">var</span> n,r,i,o;<span class="hljs-keyword">if</span>(<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>===t)<span class="hljs-keyword">return</span> <span class="hljs-keyword">void</span> <span class="hljs-number">0</span>===e?<span class="hljs-number">0</span>:-<span class="hljs-number">1</span>;<span class="hljs-keyword">if</span>(<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>===e)<span class="hljs-keyword">return</span> <span class="hljs-keyword">void</span> <span class="hljs-number">0</span>===t?<span class="hljs-number">0</span>:<span class="hljs-number">1</span>;<span class="hljs-keyword">if</span>(<span class="hljs-literal">null</span>===t)<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>===e?<span class="hljs-number">0</span>:-<span class="hljs-number">1</span>;<span class="hljs-keyword">if</span>(<span class="hljs-literal">null</span>===e)<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>===t?<span class="hljs-number">0</span>:<span class="hljs-number">1</span>;<span class="hljs-keyword">if</span>(<span class="hljs-string">"number"</span>==<span class="hljs-keyword">typeof</span> t)<span class="hljs-keyword">return</span><span class="hljs-string">"number"</span>==<span class="hljs-keyword">typeof</span> e?s(t,e):-<span class="hljs-number">1</span>;<span class="hljs-keyword">if</span>(<span class="hljs-string">"number"</span>==<span class="hljs-keyword">typeof</span> e)<span class="hljs-keyword">return</span><span class="hljs-string">"number"</span>==<span class="hljs-keyword">typeof</span> t?s(t,e):<span class="hljs-number">1</span>;<span class="hljs-keyword">if</span>(<span class="hljs-string">"string"</span>==<span class="hljs-keyword">typeof</span> t)<span class="hljs-keyword">return</span><span class="hljs-string">"string"</span>==<span class="hljs-keyword">typeof</span> e?s(t,e):-<span class="hljs-number">1</span>;<span class="hljs-keyword">if</span>(<span class="hljs-string">"string"</span>==<span class="hljs-keyword">typeof</span> e)<span class="hljs-keyword">return</span><span class="hljs-string">"string"</span>==<span class="hljs-keyword">typeof</span> t?s(t,e):<span class="hljs-number">1</span>;<span class="hljs-keyword">if</span>(<span class="hljs-string">"boolean"</span>==<span class="hljs-keyword">typeof</span> t)<span class="hljs-keyword">return</span><span class="hljs-string">"boolean"</span>==<span class="hljs-keyword">typeof</span> e?s(t,e):-<span class="hljs-number">1</span>;<span class="hljs-keyword">if</span>(<span class="hljs-string">"boolean"</span>==<span class="hljs-keyword">typeof</span> e)<span class="hljs-keyword">return</span><span class="hljs-string">"boolean"</span>==<span class="hljs-keyword">typeof</span> t?s(t,e):<span class="hljs-number">1</span>;<span class="hljs-keyword">if</span>(w.isDate(t))<span class="hljs-keyword">return</span> w.isDate(e)?s(t.getTime(),e.getTime()):-<span class="hljs-number">1</span>;<span class="hljs-keyword">if</span>(w.isDate(e))<span class="hljs-keyword">return</span> w.isDate(t)?s(t.getTime(),e.getTime()):<span class="hljs-number">1</span>;<span class="hljs-keyword">if</span>(w.isArray(t))<span class="hljs-keyword">return</span> w.isArray(e)?c(t,e):-<span class="hljs-number">1</span>;<span class="hljs-keyword">if</span>(w.isArray(e))<span class="hljs-keyword">return</span> w.isArray(t)?c(t,e):<span class="hljs-number">1</span>;<span class="hljs-keyword">for</span>(n=<span class="hljs-built_in">Object</span>.keys(t).sort(),r=<span class="hljs-built_in">Object</span>.keys(e).sort(),o=<span class="hljs-number">0</span>;o&lt;<span class="hljs-built_in">Math</span>.min(n.length,r.length);o+=<span class="hljs-number">1</span>)<span class="hljs-keyword">if</span>(i=f(t[n[o]],e[r[o]]),<span class="hljs-number">0</span>!==i)<span class="hljs-keyword">return</span> i;<span class="hljs-keyword">return</span> s(n.length,r.length)}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">l</span><span class="hljs-params">(t)</span></span>{<span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e,n,r)</span></span>{<span class="hljs-keyword">var</span> i=<span class="hljs-string">"string"</span>==<span class="hljs-keyword">typeof</span> n?n.split(<span class="hljs-string">"."</span>):n;<span class="hljs-number">1</span>===i.length?_[t](e,n,r):(e[i[<span class="hljs-number">0</span>]]=e[i[<span class="hljs-number">0</span>]]||{},x[t](e[i[<span class="hljs-number">0</span>]],i.slice(<span class="hljs-number">1</span>),r))}}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">h</span><span class="hljs-params">(t,e)</span></span>{<span class="hljs-keyword">var</span> n,i,o=<span class="hljs-built_in">Object</span>.keys(e),a=k.map(o,<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{<span class="hljs-keyword">return</span> t[<span class="hljs-number">0</span>]}),s=k.filter(a,<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{<span class="hljs-keyword">return</span><span class="hljs-string">"$"</span>===t});<span class="hljs-keyword">if</span>(-<span class="hljs-number">1</span>!==o.indexOf(<span class="hljs-string">"_id"</span>)&amp;&amp;e._id!==t._id)<span class="hljs-keyword">throw</span><span class="hljs-string">"You cannot change a document's _id"</span>;<span class="hljs-keyword">if</span>(<span class="hljs-number">0</span>!==s.length&amp;&amp;s.length!==a.length)<span class="hljs-keyword">throw</span><span class="hljs-string">"You cannot mix modifiers and normal fields"</span>;<span class="hljs-keyword">if</span>(<span class="hljs-number">0</span>===s.length?(n=u(e),n._id=t._id):(i=k.uniq(o),n=u(t),i.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{<span class="hljs-keyword">var</span> r;<span class="hljs-keyword">if</span>(!x[t])<span class="hljs-keyword">throw</span><span class="hljs-string">"Unknown modifier "</span>+t;<span class="hljs-keyword">try</span>{r=<span class="hljs-built_in">Object</span>.keys(e[t])}<span class="hljs-keyword">catch</span>(i){<span class="hljs-keyword">throw</span><span class="hljs-string">"Modifier "</span>+t+<span class="hljs-string">"'s argument must be an object"</span>}r.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(r)</span></span>{x[t](n,r,e[t][r])})})),r(n),t._id!==n._id)<span class="hljs-keyword">throw</span><span class="hljs-string">"You can't change a document's _id"</span>;<span class="hljs-keyword">return</span> n}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">p</span><span class="hljs-params">(t,e)</span></span>{<span class="hljs-keyword">var</span> n,r,i=<span class="hljs-string">"string"</span>==<span class="hljs-keyword">typeof</span> e?e.split(<span class="hljs-string">"."</span>):e;<span class="hljs-keyword">if</span>(!t)<span class="hljs-keyword">return</span> <span class="hljs-keyword">void</span> <span class="hljs-number">0</span>;<span class="hljs-keyword">if</span>(<span class="hljs-number">0</span>===i.length)<span class="hljs-keyword">return</span> t;<span class="hljs-keyword">if</span>(<span class="hljs-number">1</span>===i.length)<span class="hljs-keyword">return</span> t[i[<span class="hljs-number">0</span>]];<span class="hljs-keyword">if</span>(w.isArray(t[i[<span class="hljs-number">0</span>]])){<span class="hljs-keyword">if</span>(n=<span class="hljs-built_in">parseInt</span>(i[<span class="hljs-number">1</span>],<span class="hljs-number">10</span>),<span class="hljs-string">"number"</span>==<span class="hljs-keyword">typeof</span> n&amp;&amp;!<span class="hljs-built_in">isNaN</span>(n))<span class="hljs-keyword">return</span> p(t[i[<span class="hljs-number">0</span>]][n],i.slice(<span class="hljs-number">2</span>));<span class="hljs-keyword">for</span>(r=<span class="hljs-keyword">new</span> <span class="hljs-built_in">Array</span>,n=<span class="hljs-number">0</span>;n&lt;t[i[<span class="hljs-number">0</span>]].length;n+=<span class="hljs-number">1</span>)r.push(p(t[i[<span class="hljs-number">0</span>]][n],i.slice(<span class="hljs-number">1</span>)));<span class="hljs-keyword">return</span> r}<span class="hljs-keyword">return</span> p(t[i[<span class="hljs-number">0</span>]],i.slice(<span class="hljs-number">1</span>))}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">y</span><span class="hljs-params">(t,e)</span></span>{<span class="hljs-keyword">var</span> n,r,i;<span class="hljs-keyword">if</span>(<span class="hljs-literal">null</span>===t||<span class="hljs-string">"string"</span>==<span class="hljs-keyword">typeof</span> t||<span class="hljs-string">"boolean"</span>==<span class="hljs-keyword">typeof</span> t||<span class="hljs-string">"number"</span>==<span class="hljs-keyword">typeof</span> t||<span class="hljs-literal">null</span>===e||<span class="hljs-string">"string"</span>==<span class="hljs-keyword">typeof</span> e||<span class="hljs-string">"boolean"</span>==<span class="hljs-keyword">typeof</span> e||<span class="hljs-string">"number"</span>==<span class="hljs-keyword">typeof</span> e)<span class="hljs-keyword">return</span> t===e;<span class="hljs-keyword">if</span>(w.isDate(t)||w.isDate(e))<span class="hljs-keyword">return</span> w.isDate(t)&amp;&amp;w.isDate(e)&amp;&amp;t.getTime()===e.getTime();<span class="hljs-keyword">if</span>(w.isArray(t)||w.isArray(e)||<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>===t||<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>===e)<span class="hljs-keyword">return</span>!<span class="hljs-number">1</span>;<span class="hljs-keyword">try</span>{n=<span class="hljs-built_in">Object</span>.keys(t),r=<span class="hljs-built_in">Object</span>.keys(e)}<span class="hljs-keyword">catch</span>(o){<span class="hljs-keyword">return</span>!<span class="hljs-number">1</span>}<span class="hljs-keyword">if</span>(n.length!==r.length)<span class="hljs-keyword">return</span>!<span class="hljs-number">1</span>;<span class="hljs-keyword">for</span>(i=<span class="hljs-number">0</span>;i&lt;n.length;i+=<span class="hljs-number">1</span>){<span class="hljs-keyword">if</span>(-<span class="hljs-number">1</span>===r.indexOf(n[i]))<span class="hljs-keyword">return</span>!<span class="hljs-number">1</span>;<span class="hljs-keyword">if</span>(!y(t[n[i]],e[n[i]]))<span class="hljs-keyword">return</span>!<span class="hljs-number">1</span>}<span class="hljs-keyword">return</span>!<span class="hljs-number">0</span>}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">d</span><span class="hljs-params">(t,e)</span></span>{<span class="hljs-keyword">return</span><span class="hljs-string">"string"</span>==<span class="hljs-keyword">typeof</span> t||<span class="hljs-string">"number"</span>==<span class="hljs-keyword">typeof</span> t||w.isDate(t)||<span class="hljs-string">"string"</span>==<span class="hljs-keyword">typeof</span> e||<span class="hljs-string">"number"</span>==<span class="hljs-keyword">typeof</span> e||w.isDate(e)?<span class="hljs-keyword">typeof</span> t!=<span class="hljs-keyword">typeof</span> e?!<span class="hljs-number">1</span>:!<span class="hljs-number">0</span>:!<span class="hljs-number">1</span>}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">g</span><span class="hljs-params">(t,e)</span></span>{<span class="hljs-keyword">var</span> n,r,i,o;<span class="hljs-keyword">if</span>(a(t)||a(e))<span class="hljs-keyword">return</span> v({needAKey:t},<span class="hljs-string">"needAKey"</span>,e);<span class="hljs-keyword">for</span>(n=<span class="hljs-built_in">Object</span>.keys(e),o=<span class="hljs-number">0</span>;o&lt;n.length;o+=<span class="hljs-number">1</span>)<span class="hljs-keyword">if</span>(r=n[o],i=e[r],<span class="hljs-string">"$"</span>===r[<span class="hljs-number">0</span>]){<span class="hljs-keyword">if</span>(!A[r])<span class="hljs-keyword">throw</span><span class="hljs-string">"Unknown logical operator "</span>+r;<span class="hljs-keyword">if</span>(!A[r](t,i))<span class="hljs-keyword">return</span>!<span class="hljs-number">1</span>}<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(!v(t,r,i))<span class="hljs-keyword">return</span>!<span class="hljs-number">1</span>;<span class="hljs-keyword">return</span>!<span class="hljs-number">0</span>}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">v</span><span class="hljs-params">(t,e,n,r)</span></span>{<span class="hljs-keyword">var</span> i,o,u,a,s=p(t,e);<span class="hljs-keyword">if</span>(w.isArray(s)&amp;&amp;!r){<span class="hljs-keyword">if</span>(<span class="hljs-literal">null</span>!==n&amp;&amp;<span class="hljs-string">"object"</span>==<span class="hljs-keyword">typeof</span> n&amp;&amp;!w.isRegExp(n))<span class="hljs-keyword">for</span>(o=<span class="hljs-built_in">Object</span>.keys(n),i=<span class="hljs-number">0</span>;i&lt;o.length;i+=<span class="hljs-number">1</span>)<span class="hljs-keyword">if</span>($[o[i]])<span class="hljs-keyword">return</span> v(t,e,n,!<span class="hljs-number">0</span>);<span class="hljs-keyword">for</span>(i=<span class="hljs-number">0</span>;i&lt;s.length;i+=<span class="hljs-number">1</span>)<span class="hljs-keyword">if</span>(v({k:s[i]},<span class="hljs-string">"k"</span>,n))<span class="hljs-keyword">return</span>!<span class="hljs-number">0</span>;<span class="hljs-keyword">return</span>!<span class="hljs-number">1</span>}<span class="hljs-keyword">if</span>(<span class="hljs-literal">null</span>!==n&amp;&amp;<span class="hljs-string">"object"</span>==<span class="hljs-keyword">typeof</span> n&amp;&amp;!w.isRegExp(n)){<span class="hljs-keyword">if</span>(o=<span class="hljs-built_in">Object</span>.keys(n),u=k.map(o,<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{<span class="hljs-keyword">return</span> t[<span class="hljs-number">0</span>]}),a=k.filter(u,<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{<span class="hljs-keyword">return</span><span class="hljs-string">"$"</span>===t}),<span class="hljs-number">0</span>!==a.length&amp;&amp;a.length!==u.length)<span class="hljs-keyword">throw</span><span class="hljs-string">"You cannot mix operators and normal fields"</span>;<span class="hljs-keyword">if</span>(a.length&gt;<span class="hljs-number">0</span>){<span class="hljs-keyword">for</span>(i=<span class="hljs-number">0</span>;i&lt;o.length;i+=<span class="hljs-number">1</span>){<span class="hljs-keyword">if</span>(!O[o[i]])<span class="hljs-keyword">throw</span><span class="hljs-string">"Unknown comparison function "</span>+o[i];<span class="hljs-keyword">if</span>(!O[o[i]](s,n[o[i]]))<span class="hljs-keyword">return</span>!<span class="hljs-number">1</span>}<span class="hljs-keyword">return</span>!<span class="hljs-number">0</span>}}<span class="hljs-keyword">return</span> w.isRegExp(n)?O.$regex(s,n):y(s,n)?!<span class="hljs-number">0</span>:!<span class="hljs-number">1</span>}<span class="hljs-keyword">var</span> m=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{<span class="hljs-keyword">return</span>{$$date:<span class="hljs-keyword">this</span>.getTime()}},b=<span class="hljs-built_in">Date</span>.prototype.toJSON,w=t(<span class="hljs-string">"util"</span>),k=t(<span class="hljs-string">"underscore"</span>),x={},_={},O={},A={},$={};_.$set=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e,n)</span></span>{t[e]=n},_.$unset=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e)</span></span>{<span class="hljs-keyword">delete</span> t[e]},_.$push=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e,n)</span></span>{<span class="hljs-keyword">if</span>(t.hasOwnProperty(e)||(t[e]=[]),!w.isArray(t[e]))<span class="hljs-keyword">throw</span><span class="hljs-string">"Can't $push an element on non-array values"</span>;<span class="hljs-keyword">if</span>(<span class="hljs-literal">null</span>!==n&amp;&amp;<span class="hljs-string">"object"</span>==<span class="hljs-keyword">typeof</span> n&amp;&amp;n.$each){<span class="hljs-keyword">if</span>(<span class="hljs-built_in">Object</span>.keys(n).length&gt;<span class="hljs-number">1</span>)<span class="hljs-keyword">throw</span><span class="hljs-string">"Can't use another field in conjunction with $each"</span>;<span class="hljs-keyword">if</span>(!w.isArray(n.$each))<span class="hljs-keyword">throw</span><span class="hljs-string">"$each requires an array value"</span>;n.$each.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(n)</span></span>{t[e].push(n)})}<span class="hljs-keyword">else</span> t[e].push(n)},_.$addToSet=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e,n)</span></span>{<span class="hljs-keyword">var</span> r=!<span class="hljs-number">0</span>;<span class="hljs-keyword">if</span>(t.hasOwnProperty(e)||(t[e]=[]),!w.isArray(t[e]))<span class="hljs-keyword">throw</span><span class="hljs-string">"Can't $addToSet an element on non-array values"</span>;<span class="hljs-keyword">if</span>(<span class="hljs-literal">null</span>!==n&amp;&amp;<span class="hljs-string">"object"</span>==<span class="hljs-keyword">typeof</span> n&amp;&amp;n.$each){<span class="hljs-keyword">if</span>(<span class="hljs-built_in">Object</span>.keys(n).length&gt;<span class="hljs-number">1</span>)<span class="hljs-keyword">throw</span><span class="hljs-string">"Can't use another field in conjunction with $each"</span>;<span class="hljs-keyword">if</span>(!w.isArray(n.$each))<span class="hljs-keyword">throw</span><span class="hljs-string">"$each requires an array value"</span>;n.$each.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(n)</span></span>{_.$addToSet(t,e,n)})}<span class="hljs-keyword">else</span> t[e].forEach(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{<span class="hljs-number">0</span>===f(t,n)&amp;&amp;(r=!<span class="hljs-number">1</span>)}),r&amp;&amp;t[e].push(n)},_.$pop=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e,n)</span></span>{<span class="hljs-keyword">if</span>(!w.isArray(t[e]))<span class="hljs-keyword">throw</span><span class="hljs-string">"Can't $pop an element from non-array values"</span>;<span class="hljs-keyword">if</span>(<span class="hljs-string">"number"</span>!=<span class="hljs-keyword">typeof</span> n)<span class="hljs-keyword">throw</span> n+<span class="hljs-string">" isn't an integer, can't use it with $pop"</span>;<span class="hljs-number">0</span>!==n&amp;&amp;(t[e]=n&gt;<span class="hljs-number">0</span>?t[e].slice(<span class="hljs-number">0</span>,t[e].length-<span class="hljs-number">1</span>):t[e].slice(<span class="hljs-number">1</span>))},_.$pull=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e,n)</span></span>{<span class="hljs-keyword">var</span> r,i;<span class="hljs-keyword">if</span>(!w.isArray(t[e]))<span class="hljs-keyword">throw</span><span class="hljs-string">"Can't $pull an element from non-array values"</span>;<span class="hljs-keyword">for</span>(r=t[e],i=r.length-<span class="hljs-number">1</span>;i&gt;=<span class="hljs-number">0</span>;i-=<span class="hljs-number">1</span>)g(r[i],n)&amp;&amp;r.splice(i,<span class="hljs-number">1</span>)},_.$inc=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e,n)</span></span>{<span class="hljs-keyword">if</span>(<span class="hljs-string">"number"</span>!=<span class="hljs-keyword">typeof</span> n)<span class="hljs-keyword">throw</span> n+<span class="hljs-string">" must be a number"</span>;<span class="hljs-keyword">if</span>(<span class="hljs-string">"number"</span>!=<span class="hljs-keyword">typeof</span> t[e]){<span class="hljs-keyword">if</span>(k.has(t,e))<span class="hljs-keyword">throw</span><span class="hljs-string">"Don't use the $inc modifier on non-number fields"</span>;t[e]=n}<span class="hljs-keyword">else</span> t[e]+=n},<span class="hljs-built_in">Object</span>.keys(_).forEach(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{x[t]=l(t)}),O.$lt=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e)</span></span>{<span class="hljs-keyword">return</span> d(t,e)&amp;&amp;e&gt;t},O.$lte=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e)</span></span>{<span class="hljs-keyword">return</span> d(t,e)&amp;&amp;e&gt;=t},O.$gt=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e)</span></span>{<span class="hljs-keyword">return</span> d(t,e)&amp;&amp;t&gt;e},O.$gte=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e)</span></span>{<span class="hljs-keyword">return</span> d(t,e)&amp;&amp;t&gt;=e},O.$ne=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e)</span></span>{<span class="hljs-keyword">return</span> t?!y(t,e):!<span class="hljs-number">0</span>},O.$<span class="hljs-keyword">in</span>=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e)</span></span>{<span class="hljs-keyword">var</span> n;<span class="hljs-keyword">if</span>(!w.isArray(e))<span class="hljs-keyword">throw</span><span class="hljs-string">"$in operator called with a non-array"</span>;<span class="hljs-keyword">for</span>(n=<span class="hljs-number">0</span>;n&lt;e.length;n+=<span class="hljs-number">1</span>)<span class="hljs-keyword">if</span>(y(t,e[n]))<span class="hljs-keyword">return</span>!<span class="hljs-number">0</span>;<span class="hljs-keyword">return</span>!<span class="hljs-number">1</span>},O.$nin=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e)</span></span>{<span class="hljs-keyword">if</span>(!w.isArray(e))<span class="hljs-keyword">throw</span><span class="hljs-string">"$nin operator called with a non-array"</span>;<span class="hljs-keyword">return</span>!O.$<span class="hljs-keyword">in</span>(t,e)},O.$regex=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e)</span></span>{<span class="hljs-keyword">if</span>(!w.isRegExp(e))<span class="hljs-keyword">throw</span><span class="hljs-string">"$regex operator called with non regular expression"</span>;<span class="hljs-keyword">return</span><span class="hljs-string">"string"</span>!=<span class="hljs-keyword">typeof</span> t?!<span class="hljs-number">1</span>:e.test(t)},O.$exists=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e)</span></span>{<span class="hljs-keyword">return</span> e=e||<span class="hljs-string">""</span>===e?!<span class="hljs-number">0</span>:!<span class="hljs-number">1</span>,<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>===t?!e:e},O.$size=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e)</span></span>{<span class="hljs-keyword">if</span>(!w.isArray(t))<span class="hljs-keyword">return</span>!<span class="hljs-number">1</span>;<span class="hljs-keyword">if</span>(<span class="hljs-number">0</span>!==e%<span class="hljs-number">1</span>)<span class="hljs-keyword">throw</span><span class="hljs-string">"$size operator called without an integer"</span>;<span class="hljs-keyword">return</span> t.length==e},$.$size=!<span class="hljs-number">0</span>,A.$or=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e)</span></span>{<span class="hljs-keyword">var</span> n;<span class="hljs-keyword">if</span>(!w.isArray(e))<span class="hljs-keyword">throw</span><span class="hljs-string">"$or operator used without an array"</span>;<span class="hljs-keyword">for</span>(n=<span class="hljs-number">0</span>;n&lt;e.length;n+=<span class="hljs-number">1</span>)<span class="hljs-keyword">if</span>(g(t,e[n]))<span class="hljs-keyword">return</span>!<span class="hljs-number">0</span>;<span class="hljs-keyword">return</span>!<span class="hljs-number">1</span>},A.$and=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e)</span></span>{<span class="hljs-keyword">var</span> n;<span class="hljs-keyword">if</span>(!w.isArray(e))<span class="hljs-keyword">throw</span><span class="hljs-string">"$and operator used without an array"</span>;<span class="hljs-keyword">for</span>(n=<span class="hljs-number">0</span>;n&lt;e.length;n+=<span class="hljs-number">1</span>)<span class="hljs-keyword">if</span>(!g(t,e[n]))<span class="hljs-keyword">return</span>!<span class="hljs-number">1</span>;<span class="hljs-keyword">return</span>!<span class="hljs-number">0</span>},A.$not=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e)</span></span>{<span class="hljs-keyword">return</span>!g(t,e)},A.$where=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e)</span></span>{<span class="hljs-keyword">var</span> n;<span class="hljs-keyword">if</span>(!k.isFunction(e))<span class="hljs-keyword">throw</span><span class="hljs-string">"$where operator used without a function"</span>;<span class="hljs-keyword">if</span>(n=e.call(t),!k.isBoolean(n))<span class="hljs-keyword">throw</span><span class="hljs-string">"$where function must return boolean"</span>;<span class="hljs-keyword">return</span> n},e.exports.serialize=i,e.exports.deserialize=o,e.exports.deepCopy=u,e.exports.checkObject=r,e.exports.isPrimitiveType=a,e.exports.modify=h,e.exports.getDotValue=p,e.exports.match=g,e.exports.areThingsEqual=y,e.exports.compareThings=f},{underscore:<span class="hljs-number">16</span>,util:<span class="hljs-number">2</span>}],<span class="hljs-number">10</span>:[<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e)</span></span>{<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">n</span><span class="hljs-params">(t)</span></span>{<span class="hljs-keyword">this</span>.db=t.db,<span class="hljs-keyword">this</span>.db.inMemoryOnly=!<span class="hljs-number">0</span>,<span class="hljs-keyword">this</span>.db.filename=<span class="hljs-literal">null</span>,<span class="hljs-keyword">this</span>.inMemoryOnly=!<span class="hljs-number">0</span>}n.prototype.persistNewState=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e)</span></span>{<span class="hljs-keyword">return</span> e?e():<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>},n.prototype.loadDatabase=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{<span class="hljs-keyword">return</span> t?t():<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>},e.exports=n},{}],<span class="hljs-number">11</span>:[<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e,n)</span></span>{<span class="hljs-keyword">var</span> r=e(<span class="hljs-string">"__browserify_process"</span>);!<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">e</span><span class="hljs-params">(t)</span></span>{<span class="hljs-keyword">var</span> e=!<span class="hljs-number">1</span>;<span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{<span class="hljs-keyword">if</span>(e)<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">"Callback was already called."</span>);e=!<span class="hljs-number">0</span>,t.apply(i,<span class="hljs-built_in">arguments</span>)}}<span class="hljs-keyword">var</span> i,o,u={};i=<span class="hljs-keyword">this</span>,<span class="hljs-literal">null</span>!=i&amp;&amp;(o=i.async),u.noConflict=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{<span class="hljs-keyword">return</span> i.async=o,u};<span class="hljs-keyword">var</span> a=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e)</span></span>{<span class="hljs-keyword">if</span>(t.forEach)<span class="hljs-keyword">return</span> t.forEach(e);<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> n=<span class="hljs-number">0</span>;n&lt;t.length;n+=<span class="hljs-number">1</span>)e(t[n],n,t)},s=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e)</span></span>{<span class="hljs-keyword">if</span>(t.map)<span class="hljs-keyword">return</span> t.map(e);<span class="hljs-keyword">var</span> n=[];<span class="hljs-keyword">return</span> a(t,<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,r,i)</span></span>{n.push(e(t,r,i))}),n},c=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e,n)</span></span>{<span class="hljs-keyword">return</span> t.reduce?t.reduce(e,n):(a(t,<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,r,i)</span></span>{n=e(n,t,r,i)}),n)},f=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{<span class="hljs-keyword">if</span>(<span class="hljs-built_in">Object</span>.keys)<span class="hljs-keyword">return</span> <span class="hljs-built_in">Object</span>.keys(t);<span class="hljs-keyword">var</span> e=[];<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> n <span class="hljs-keyword">in</span> t)t.hasOwnProperty(n)&amp;&amp;e.push(n);<span class="hljs-keyword">return</span> e};<span class="hljs-string">"undefined"</span>!=<span class="hljs-keyword">typeof</span> r&amp;&amp;r.nextTick?(u.nextTick=r.nextTick,u.setImmediate=<span class="hljs-string">"undefined"</span>!=<span class="hljs-keyword">typeof</span> setImmediate?<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{setImmediate(t)}:u.nextTick):<span class="hljs-string">"function"</span>==<span class="hljs-keyword">typeof</span> setImmediate?(u.nextTick=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{setImmediate(t)},u.setImmediate=u.nextTick):(u.nextTick=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{setTimeout(t,<span class="hljs-number">0</span>)},u.setImmediate=u.nextTick),u.each=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,n,r)</span></span>{<span class="hljs-keyword">if</span>(r=r||<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{},!t.length)<span class="hljs-keyword">return</span> r();<span class="hljs-keyword">var</span> i=<span class="hljs-number">0</span>;a(t,<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(o)</span></span>{n(o,e(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span></span>{e?(r(e),r=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{}):(i+=<span class="hljs-number">1</span>,i&gt;=t.length&amp;&amp;r(<span class="hljs-literal">null</span>))}))})},u.forEach=u.each,u.eachSeries=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e,n)</span></span>{<span class="hljs-keyword">if</span>(n=n||<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{},!t.length)<span class="hljs-keyword">return</span> n();<span class="hljs-keyword">var</span> r=<span class="hljs-number">0</span>,i=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{e(t[r],<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span></span>{e?(n(e),n=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{}):(r+=<span class="hljs-number">1</span>,r&gt;=t.length?n(<span class="hljs-literal">null</span>):i())})};i()},u.forEachSeries=u.eachSeries,u.eachLimit=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e,n,r)</span></span>{<span class="hljs-keyword">var</span> i=l(e);i.apply(<span class="hljs-literal">null</span>,[t,n,r])},u.forEachLimit=u.eachLimit;<span class="hljs-keyword">var</span> l=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{<span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e,n,r)</span></span>{<span class="hljs-keyword">if</span>(r=r||<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{},!e.length||<span class="hljs-number">0</span>&gt;=t)<span class="hljs-keyword">return</span> r();<span class="hljs-keyword">var</span> i=<span class="hljs-number">0</span>,o=<span class="hljs-number">0</span>,u=<span class="hljs-number">0</span>;!<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">a</span><span class="hljs-params">()</span></span>{<span class="hljs-keyword">if</span>(i&gt;=e.length)<span class="hljs-keyword">return</span> r();<span class="hljs-keyword">for</span>(;t&gt;u&amp;&amp;o&lt;e.length;)o+=<span class="hljs-number">1</span>,u+=<span class="hljs-number">1</span>,n(e[o-<span class="hljs-number">1</span>],<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{t?(r(t),r=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{}):(i+=<span class="hljs-number">1</span>,u-=<span class="hljs-number">1</span>,i&gt;=e.length?r():a())})}()}},h=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{<span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{<span class="hljs-keyword">var</span> e=<span class="hljs-built_in">Array</span>.prototype.slice.call(<span class="hljs-built_in">arguments</span>);<span class="hljs-keyword">return</span> t.apply(<span class="hljs-literal">null</span>,[u.each].concat(e))}},p=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e)</span></span>{<span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{<span class="hljs-keyword">var</span> n=<span class="hljs-built_in">Array</span>.prototype.slice.call(<span class="hljs-built_in">arguments</span>);<span class="hljs-keyword">return</span> e.apply(<span class="hljs-literal">null</span>,[l(t)].concat(n))}},y=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{<span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{<span class="hljs-keyword">var</span> e=<span class="hljs-built_in">Array</span>.prototype.slice.call(<span class="hljs-built_in">arguments</span>);<span class="hljs-keyword">return</span> t.apply(<span class="hljs-literal">null</span>,[u.eachSeries].concat(e))}},d=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e,n,r)</span></span>{<span class="hljs-keyword">var</span> i=[];e=s(e,<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e)</span></span>{<span class="hljs-keyword">return</span>{index:e,value:t}}),t(e,<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e)</span></span>{n(t.value,<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(n,r)</span></span>{i[t.index]=r,e(n)})},<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{r(t,i)})};u.map=h(d),u.mapSeries=y(d),u.mapLimit=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e,n,r)</span></span>{<span class="hljs-keyword">return</span> g(e)(t,n,r)};<span class="hljs-keyword">var</span> g=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{<span class="hljs-keyword">return</span> p(t,d)};u.reduce=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e,n,r)</span></span>{u.eachSeries(t,<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,r)</span></span>{n(e,t,<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,n)</span></span>{e=n,r(t)})},<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{r(t,e)})},u.inject=u.reduce,u.foldl=u.reduce,u.reduceRight=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e,n,r)</span></span>{<span class="hljs-keyword">var</span> i=s(t,<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{<span class="hljs-keyword">return</span> t}).reverse();u.reduce(i,e,n,r)},u.foldr=u.reduceRight;<span class="hljs-keyword">var</span> v=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e,n,r)</span></span>{<span class="hljs-keyword">var</span> i=[];e=s(e,<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e)</span></span>{<span class="hljs-keyword">return</span>{index:e,value:t}}),t(e,<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e)</span></span>{n(t.value,<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(n)</span></span>{n&amp;&amp;i.push(t),e()})},<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{r(s(i.sort(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e)</span></span>{<span class="hljs-keyword">return</span> t.index-e.index}),<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{<span class="hljs-keyword">return</span> t.value}))})};u.filter=h(v),u.filterSeries=y(v),u.select=u.filter,u.selectSeries=u.filterSeries;<span class="hljs-keyword">var</span> m=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e,n,r)</span></span>{<span class="hljs-keyword">var</span> i=[];e=s(e,<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e)</span></span>{<span class="hljs-keyword">return</span>{index:e,value:t}}),t(e,<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e)</span></span>{n(t.value,<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(n)</span></span>{n||i.push(t),e()})},<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{r(s(i.sort(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e)</span></span>{<span class="hljs-keyword">return</span> t.index-e.index}),<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{<span class="hljs-keyword">return</span> t.value}))})};u.reject=h(m),u.rejectSeries=y(m);<span class="hljs-keyword">var</span> b=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e,n,r)</span></span>{t(e,<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e)</span></span>{n(t,<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(n)</span></span>{n?(r(t),r=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{}):e()})},<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{r()})};u.detect=h(b),u.detectSeries=y(b),u.some=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e,n)</span></span>{u.each(t,<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,r)</span></span>{e(t,<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{t&amp;&amp;(n(!<span class="hljs-number">0</span>),n=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{}),r()})},<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{n(!<span class="hljs-number">1</span>)})},u.any=u.some,u.every=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e,n)</span></span>{u.each(t,<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,r)</span></span>{e(t,<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{t||(n(!<span class="hljs-number">1</span>),n=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{}),r()})},<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{n(!<span class="hljs-number">0</span>)})},u.all=u.every,u.sortBy=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e,n)</span></span>{u.map(t,<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,n)</span></span>{e(t,<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e,r)</span></span>{e?n(e):n(<span class="hljs-literal">null</span>,{value:t,criteria:r})})},<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e)</span></span>{<span class="hljs-keyword">if</span>(t)<span class="hljs-keyword">return</span> n(t);<span class="hljs-keyword">var</span> r=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e)</span></span>{<span class="hljs-keyword">var</span> n=t.criteria,r=e.criteria;<span class="hljs-keyword">return</span> r&gt;n?-<span class="hljs-number">1</span>:n&gt;r?<span class="hljs-number">1</span>:<span class="hljs-number">0</span>};n(<span class="hljs-literal">null</span>,s(e.sort(r),<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{<span class="hljs-keyword">return</span> t.value}))})},u.auto=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e)</span></span>{e=e||<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{};<span class="hljs-keyword">var</span> n=f(t);<span class="hljs-keyword">if</span>(!n.length)<span class="hljs-keyword">return</span> e(<span class="hljs-literal">null</span>);<span class="hljs-keyword">var</span> r={},i=[],o=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{i.unshift(t)},s=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> e=<span class="hljs-number">0</span>;e&lt;i.length;e+=<span class="hljs-number">1</span>)<span class="hljs-keyword">if</span>(i[e]===t)<span class="hljs-keyword">return</span> i.splice(e,<span class="hljs-number">1</span>),<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>},l=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{a(i.slice(<span class="hljs-number">0</span>),<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{t()})};o(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{f(r).length===n.length&amp;&amp;(e(<span class="hljs-literal">null</span>,r),e=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{})}),a(n,<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(n)</span></span>{<span class="hljs-keyword">var</span> i=t[n]<span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">Function</span>?[t[n]]:t[n],h=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{<span class="hljs-keyword">var</span> i=<span class="hljs-built_in">Array</span>.prototype.slice.call(<span class="hljs-built_in">arguments</span>,<span class="hljs-number">1</span>);<span class="hljs-keyword">if</span>(i.length&lt;=<span class="hljs-number">1</span>&amp;&amp;(i=i[<span class="hljs-number">0</span>]),t){<span class="hljs-keyword">var</span> o={};a(f(r),<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{o[t]=r[t]}),o[n]=i,e(t,o),e=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{}}<span class="hljs-keyword">else</span> r[n]=i,u.setImmediate(l)},p=i.slice(<span class="hljs-number">0</span>,<span class="hljs-built_in">Math</span>.abs(i.length-<span class="hljs-number">1</span>))||[],y=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{<span class="hljs-keyword">return</span> c(p,<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e)</span></span>{<span class="hljs-keyword">return</span> t&amp;&amp;r.hasOwnProperty(e)},!<span class="hljs-number">0</span>)&amp;&amp;!r.hasOwnProperty(n)};<span class="hljs-keyword">if</span>(y())i[i.length-<span class="hljs-number">1</span>](h,r);<span class="hljs-keyword">else</span>{<span class="hljs-keyword">var</span> d=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{y()&amp;&amp;(s(d),i[i.length-<span class="hljs-number">1</span>](h,r))};o(d)
}})},u.waterfall=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e)</span></span>{<span class="hljs-keyword">if</span>(e=e||<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{},t.constructor!==<span class="hljs-built_in">Array</span>){<span class="hljs-keyword">var</span> n=<span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">"First argument to waterfall must be an array of functions"</span>);<span class="hljs-keyword">return</span> e(n)}<span class="hljs-keyword">if</span>(!t.length)<span class="hljs-keyword">return</span> e();<span class="hljs-keyword">var</span> r=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{<span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(n)</span></span>{<span class="hljs-keyword">if</span>(n)e.apply(<span class="hljs-literal">null</span>,<span class="hljs-built_in">arguments</span>),e=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{};<span class="hljs-keyword">else</span>{<span class="hljs-keyword">var</span> i=<span class="hljs-built_in">Array</span>.prototype.slice.call(<span class="hljs-built_in">arguments</span>,<span class="hljs-number">1</span>),o=t.next();o?i.push(r(o)):i.push(e),u.setImmediate(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{t.apply(<span class="hljs-literal">null</span>,i)})}}};r(u.iterator(t))()};<span class="hljs-keyword">var</span> w=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e,n)</span></span>{<span class="hljs-keyword">if</span>(n=n||<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{},e.constructor===<span class="hljs-built_in">Array</span>)t.map(e,<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e)</span></span>{t&amp;&amp;t(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{<span class="hljs-keyword">var</span> n=<span class="hljs-built_in">Array</span>.prototype.slice.call(<span class="hljs-built_in">arguments</span>,<span class="hljs-number">1</span>);n.length&lt;=<span class="hljs-number">1</span>&amp;&amp;(n=n[<span class="hljs-number">0</span>]),e.call(<span class="hljs-literal">null</span>,t,n)})},n);<span class="hljs-keyword">else</span>{<span class="hljs-keyword">var</span> r={};t.each(f(e),<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,n)</span></span>{e[t](<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span></span>{<span class="hljs-keyword">var</span> i=<span class="hljs-built_in">Array</span>.prototype.slice.call(<span class="hljs-built_in">arguments</span>,<span class="hljs-number">1</span>);i.length&lt;=<span class="hljs-number">1</span>&amp;&amp;(i=i[<span class="hljs-number">0</span>]),r[t]=i,n(e)})},<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{n(t,r)})}};u.parallel=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e)</span></span>{w({map:u.map,each:u.each},t,e)},u.parallelLimit=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e,n)</span></span>{w({map:g(e),each:l(e)},t,n)},u.series=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e)</span></span>{<span class="hljs-keyword">if</span>(e=e||<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{},t.constructor===<span class="hljs-built_in">Array</span>)u.mapSeries(t,<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e)</span></span>{t&amp;&amp;t(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{<span class="hljs-keyword">var</span> n=<span class="hljs-built_in">Array</span>.prototype.slice.call(<span class="hljs-built_in">arguments</span>,<span class="hljs-number">1</span>);n.length&lt;=<span class="hljs-number">1</span>&amp;&amp;(n=n[<span class="hljs-number">0</span>]),e.call(<span class="hljs-literal">null</span>,t,n)})},e);<span class="hljs-keyword">else</span>{<span class="hljs-keyword">var</span> n={};u.eachSeries(f(t),<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e,r)</span></span>{t[e](<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{<span class="hljs-keyword">var</span> i=<span class="hljs-built_in">Array</span>.prototype.slice.call(<span class="hljs-built_in">arguments</span>,<span class="hljs-number">1</span>);i.length&lt;=<span class="hljs-number">1</span>&amp;&amp;(i=i[<span class="hljs-number">0</span>]),n[e]=i,r(t)})},<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{e(t,n)})}},u.iterator=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{<span class="hljs-keyword">var</span> e=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(n)</span></span>{<span class="hljs-keyword">var</span> r=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{<span class="hljs-keyword">return</span> t.length&amp;&amp;t[n].apply(<span class="hljs-literal">null</span>,<span class="hljs-built_in">arguments</span>),r.next()};<span class="hljs-keyword">return</span> r.next=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{<span class="hljs-keyword">return</span> n&lt;t.length-<span class="hljs-number">1</span>?e(n+<span class="hljs-number">1</span>):<span class="hljs-literal">null</span>},r};<span class="hljs-keyword">return</span> e(<span class="hljs-number">0</span>)},u.apply=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{<span class="hljs-keyword">var</span> e=<span class="hljs-built_in">Array</span>.prototype.slice.call(<span class="hljs-built_in">arguments</span>,<span class="hljs-number">1</span>);<span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{<span class="hljs-keyword">return</span> t.apply(<span class="hljs-literal">null</span>,e.concat(<span class="hljs-built_in">Array</span>.prototype.slice.call(<span class="hljs-built_in">arguments</span>)))}};<span class="hljs-keyword">var</span> k=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e,n,r)</span></span>{<span class="hljs-keyword">var</span> i=[];t(e,<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e)</span></span>{n(t,<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,n)</span></span>{i=i.concat(n||[]),e(t)})},<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{r(t,i)})};u.concat=h(k),u.concatSeries=y(k),u.whilst=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e,n)</span></span>{t()?e(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(r)</span></span>{<span class="hljs-keyword">return</span> r?n(r):(u.whilst(t,e,n),<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>)}):n()},u.doWhilst=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e,n)</span></span>{t(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(r)</span></span>{<span class="hljs-keyword">return</span> r?n(r):(e()?u.doWhilst(t,e,n):n(),<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>)})},u.until=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e,n)</span></span>{t()?n():e(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(r)</span></span>{<span class="hljs-keyword">return</span> r?n(r):(u.until(t,e,n),<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>)})},u.doUntil=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e,n)</span></span>{t(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(r)</span></span>{<span class="hljs-keyword">return</span> r?n(r):(e()?n():u.doUntil(t,e,n),<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>)})},u.queue=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,n)</span></span>{<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">r</span><span class="hljs-params">(t,e,r,i)</span></span>{e.constructor!==<span class="hljs-built_in">Array</span>&amp;&amp;(e=[e]),a(e,<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span></span>{<span class="hljs-keyword">var</span> o={data:e,callback:<span class="hljs-string">"function"</span>==<span class="hljs-keyword">typeof</span> i?i:<span class="hljs-literal">null</span>};r?t.tasks.unshift(o):t.tasks.push(o),t.saturated&amp;&amp;t.tasks.length===n&amp;&amp;t.saturated(),u.setImmediate(t.process)})}<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>===n&amp;&amp;(n=<span class="hljs-number">1</span>);<span class="hljs-keyword">var</span> i=<span class="hljs-number">0</span>,o={tasks:[],concurrency:n,saturated:<span class="hljs-literal">null</span>,empty:<span class="hljs-literal">null</span>,drain:<span class="hljs-literal">null</span>,push:<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e)</span></span>{r(o,t,!<span class="hljs-number">1</span>,e)},unshift:<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e)</span></span>{r(o,t,!<span class="hljs-number">0</span>,e)},process:<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{<span class="hljs-keyword">if</span>(i&lt;o.concurrency&amp;&amp;o.tasks.length){<span class="hljs-keyword">var</span> n=o.tasks.shift();o.empty&amp;&amp;<span class="hljs-number">0</span>===o.tasks.length&amp;&amp;o.empty(),i+=<span class="hljs-number">1</span>;<span class="hljs-keyword">var</span> r=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{i-=<span class="hljs-number">1</span>,n.callback&amp;&amp;n.callback.apply(n,<span class="hljs-built_in">arguments</span>),o.drain&amp;&amp;<span class="hljs-number">0</span>===o.tasks.length+i&amp;&amp;o.drain(),o.process()},u=e(r);t(n.data,u)}},length:<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{<span class="hljs-keyword">return</span> o.tasks.length},running:<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{<span class="hljs-keyword">return</span> i}};<span class="hljs-keyword">return</span> o},u.cargo=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e)</span></span>{<span class="hljs-keyword">var</span> n=!<span class="hljs-number">1</span>,r=[],i={tasks:r,payload:e,saturated:<span class="hljs-literal">null</span>,empty:<span class="hljs-literal">null</span>,drain:<span class="hljs-literal">null</span>,push:<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,n)</span></span>{t.constructor!==<span class="hljs-built_in">Array</span>&amp;&amp;(t=[t]),a(t,<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{r.push({data:t,callback:<span class="hljs-string">"function"</span>==<span class="hljs-keyword">typeof</span> n?n:<span class="hljs-literal">null</span>}),i.saturated&amp;&amp;r.length===e&amp;&amp;i.saturated()}),u.setImmediate(i.process)},process:<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">o</span><span class="hljs-params">()</span></span>{<span class="hljs-keyword">if</span>(!n){<span class="hljs-keyword">if</span>(<span class="hljs-number">0</span>===r.length)<span class="hljs-keyword">return</span> i.drain&amp;&amp;i.drain(),<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>;<span class="hljs-keyword">var</span> u=<span class="hljs-string">"number"</span>==<span class="hljs-keyword">typeof</span> e?r.splice(<span class="hljs-number">0</span>,e):r.splice(<span class="hljs-number">0</span>),c=s(u,<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{<span class="hljs-keyword">return</span> t.data});i.empty&amp;&amp;i.empty(),n=!<span class="hljs-number">0</span>,t(c,<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{n=!<span class="hljs-number">1</span>;<span class="hljs-keyword">var</span> t=<span class="hljs-built_in">arguments</span>;a(u,<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span></span>{e.callback&amp;&amp;e.callback.apply(<span class="hljs-literal">null</span>,t)}),o()})}},length:<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{<span class="hljs-keyword">return</span> r.length},running:<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{<span class="hljs-keyword">return</span> n}};<span class="hljs-keyword">return</span> i};<span class="hljs-keyword">var</span> x=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{<span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span></span>{<span class="hljs-keyword">var</span> n=<span class="hljs-built_in">Array</span>.prototype.slice.call(<span class="hljs-built_in">arguments</span>,<span class="hljs-number">1</span>);e.apply(<span class="hljs-literal">null</span>,n.concat([<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span></span>{<span class="hljs-keyword">var</span> n=<span class="hljs-built_in">Array</span>.prototype.slice.call(<span class="hljs-built_in">arguments</span>,<span class="hljs-number">1</span>);<span class="hljs-string">"undefined"</span>!=<span class="hljs-keyword">typeof</span> <span class="hljs-built_in">console</span>&amp;&amp;(e?<span class="hljs-built_in">console</span>.error&amp;&amp;<span class="hljs-built_in">console</span>.error(e):<span class="hljs-built_in">console</span>[t]&amp;&amp;a(n,<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span></span>{<span class="hljs-built_in">console</span>[t](e)}))}]))}};u.log=x(<span class="hljs-string">"log"</span>),u.dir=x(<span class="hljs-string">"dir"</span>),u.memoize=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e)</span></span>{<span class="hljs-keyword">var</span> n={},r={};e=e||<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{<span class="hljs-keyword">return</span> t};<span class="hljs-keyword">var</span> i=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{<span class="hljs-keyword">var</span> i=<span class="hljs-built_in">Array</span>.prototype.slice.call(<span class="hljs-built_in">arguments</span>),o=i.pop(),u=e.apply(<span class="hljs-literal">null</span>,i);u <span class="hljs-keyword">in</span> n?o.apply(<span class="hljs-literal">null</span>,n[u]):u <span class="hljs-keyword">in</span> r?r[u].push(o):(r[u]=[o],t.apply(<span class="hljs-literal">null</span>,i.concat([<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{n[u]=<span class="hljs-built_in">arguments</span>;<span class="hljs-keyword">var</span> t=r[u];<span class="hljs-keyword">delete</span> r[u];<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> e=<span class="hljs-number">0</span>,i=t.length;i&gt;e;e++)t[e].apply(<span class="hljs-literal">null</span>,<span class="hljs-built_in">arguments</span>)}])))};<span class="hljs-keyword">return</span> i.memo=n,i.unmemoized=t,i},u.unmemoize=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{<span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{<span class="hljs-keyword">return</span>(t.unmemoized||t).apply(<span class="hljs-literal">null</span>,<span class="hljs-built_in">arguments</span>)}},u.times=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e,n)</span></span>{<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> r=[],i=<span class="hljs-number">0</span>;t&gt;i;i++)r.push(i);<span class="hljs-keyword">return</span> u.map(r,e,n)},u.timesSeries=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e,n)</span></span>{<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> r=[],i=<span class="hljs-number">0</span>;t&gt;i;i++)r.push(i);<span class="hljs-keyword">return</span> u.mapSeries(r,e,n)},u.compose=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{<span class="hljs-keyword">var</span> t=<span class="hljs-built_in">Array</span>.prototype.reverse.call(<span class="hljs-built_in">arguments</span>);<span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{<span class="hljs-keyword">var</span> e=<span class="hljs-keyword">this</span>,n=<span class="hljs-built_in">Array</span>.prototype.slice.call(<span class="hljs-built_in">arguments</span>),r=n.pop();u.reduce(t,n,<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,n,r)</span></span>{n.apply(e,t.concat([<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{<span class="hljs-keyword">var</span> t=<span class="hljs-built_in">arguments</span>[<span class="hljs-number">0</span>],e=<span class="hljs-built_in">Array</span>.prototype.slice.call(<span class="hljs-built_in">arguments</span>,<span class="hljs-number">1</span>);r(t,e)}]))},<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,n)</span></span>{r.apply(e,[t].concat(n))})}};<span class="hljs-keyword">var</span> _=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e)</span></span>{<span class="hljs-keyword">var</span> n=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{<span class="hljs-keyword">var</span> n=<span class="hljs-keyword">this</span>,r=<span class="hljs-built_in">Array</span>.prototype.slice.call(<span class="hljs-built_in">arguments</span>),i=r.pop();<span class="hljs-keyword">return</span> t(e,<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e)</span></span>{t.apply(n,r.concat([e]))},i)};<span class="hljs-keyword">if</span>(<span class="hljs-built_in">arguments</span>.length&gt;<span class="hljs-number">2</span>){<span class="hljs-keyword">var</span> r=<span class="hljs-built_in">Array</span>.prototype.slice.call(<span class="hljs-built_in">arguments</span>,<span class="hljs-number">2</span>);<span class="hljs-keyword">return</span> n.apply(<span class="hljs-keyword">this</span>,r)}<span class="hljs-keyword">return</span> n};u.applyEach=h(_),u.applyEachSeries=y(_),u.forever=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e)</span></span>{<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">n</span><span class="hljs-params">(r)</span></span>{<span class="hljs-keyword">if</span>(r){<span class="hljs-keyword">if</span>(e)<span class="hljs-keyword">return</span> e(r);<span class="hljs-keyword">throw</span> r}t(n)}n()},<span class="hljs-string">"undefined"</span>!=<span class="hljs-keyword">typeof</span> t&amp;&amp;t.amd?t([],<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{<span class="hljs-keyword">return</span> u}):<span class="hljs-string">"undefined"</span>!=<span class="hljs-keyword">typeof</span> n&amp;&amp;n.exports?n.exports=u:i.async=u}()},{__browserify_process:<span class="hljs-number">3</span>}],<span class="hljs-number">12</span>:[<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e)</span></span>{e.exports.BinarySearchTree=t(<span class="hljs-string">"./lib/bst"</span>),e.exports.AVLTree=t(<span class="hljs-string">"./lib/avltree"</span>)},{<span class="hljs-string">"./lib/avltree"</span>:<span class="hljs-number">13</span>,<span class="hljs-string">"./lib/bst"</span>:<span class="hljs-number">14</span>}],<span class="hljs-number">13</span>:[<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e)</span></span>{<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">n</span><span class="hljs-params">(t)</span></span>{<span class="hljs-keyword">this</span>.tree=<span class="hljs-keyword">new</span> r(t)}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">r</span><span class="hljs-params">(t)</span></span>{t=t||{},<span class="hljs-keyword">this</span>.left=<span class="hljs-literal">null</span>,<span class="hljs-keyword">this</span>.right=<span class="hljs-literal">null</span>,<span class="hljs-keyword">this</span>.parent=<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>!==t.parent?t.parent:<span class="hljs-literal">null</span>,t.hasOwnProperty(<span class="hljs-string">"key"</span>)&amp;&amp;(<span class="hljs-keyword">this</span>.key=t.key),<span class="hljs-keyword">this</span>.data=t.hasOwnProperty(<span class="hljs-string">"value"</span>)?[t.value]:[],<span class="hljs-keyword">this</span>.unique=t.unique||!<span class="hljs-number">1</span>,<span class="hljs-keyword">this</span>.compareKeys=t.compareKeys||o.defaultCompareKeysFunction,<span class="hljs-keyword">this</span>.checkValueEquality=t.checkValueEquality||o.defaultCheckValueEquality}<span class="hljs-keyword">var</span> i=t(<span class="hljs-string">"./bst"</span>),o=t(<span class="hljs-string">"./customUtils"</span>),u=t(<span class="hljs-string">"util"</span>);t(<span class="hljs-string">"underscore"</span>),u.inherits(r,i),n._AVLTree=r,r.prototype.checkHeightCorrect=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{<span class="hljs-keyword">var</span> t,e;<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.hasOwnProperty(<span class="hljs-string">"key"</span>)){<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.left&amp;&amp;<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>===<span class="hljs-keyword">this</span>.left.height)<span class="hljs-keyword">throw</span><span class="hljs-string">"Undefined height for node "</span>+<span class="hljs-keyword">this</span>.left.key;<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.right&amp;&amp;<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>===<span class="hljs-keyword">this</span>.right.height)<span class="hljs-keyword">throw</span><span class="hljs-string">"Undefined height for node "</span>+<span class="hljs-keyword">this</span>.right.key;<span class="hljs-keyword">if</span>(<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>===<span class="hljs-keyword">this</span>.height)<span class="hljs-keyword">throw</span><span class="hljs-string">"Undefined height for node "</span>+<span class="hljs-keyword">this</span>.key;<span class="hljs-keyword">if</span>(t=<span class="hljs-keyword">this</span>.left?<span class="hljs-keyword">this</span>.left.height:<span class="hljs-number">0</span>,e=<span class="hljs-keyword">this</span>.right?<span class="hljs-keyword">this</span>.right.height:<span class="hljs-number">0</span>,<span class="hljs-keyword">this</span>.height!==<span class="hljs-number">1</span>+<span class="hljs-built_in">Math</span>.max(t,e))<span class="hljs-keyword">throw</span><span class="hljs-string">"Height constraint failed for node "</span>+<span class="hljs-keyword">this</span>.key;<span class="hljs-keyword">this</span>.left&amp;&amp;<span class="hljs-keyword">this</span>.left.checkHeightCorrect(),<span class="hljs-keyword">this</span>.right&amp;&amp;<span class="hljs-keyword">this</span>.right.checkHeightCorrect()}},r.prototype.balanceFactor=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{<span class="hljs-keyword">var</span> t=<span class="hljs-keyword">this</span>.left?<span class="hljs-keyword">this</span>.left.height:<span class="hljs-number">0</span>,e=<span class="hljs-keyword">this</span>.right?<span class="hljs-keyword">this</span>.right.height:<span class="hljs-number">0</span>;<span class="hljs-keyword">return</span> t-e},r.prototype.checkBalanceFactors=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{<span class="hljs-keyword">if</span>(<span class="hljs-built_in">Math</span>.abs(<span class="hljs-keyword">this</span>.balanceFactor())&gt;<span class="hljs-number">1</span>)<span class="hljs-keyword">throw</span><span class="hljs-string">"Tree is unbalanced at node "</span>+<span class="hljs-keyword">this</span>.key;<span class="hljs-keyword">this</span>.left&amp;&amp;<span class="hljs-keyword">this</span>.left.checkBalanceFactors(),<span class="hljs-keyword">this</span>.right&amp;&amp;<span class="hljs-keyword">this</span>.right.checkBalanceFactors()},r.prototype.checkIsAVLT=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{r.super_.prototype.checkIsBST.call(<span class="hljs-keyword">this</span>),<span class="hljs-keyword">this</span>.checkHeightCorrect(),<span class="hljs-keyword">this</span>.checkBalanceFactors()},n.prototype.checkIsAVLT=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{<span class="hljs-keyword">this</span>.tree.checkIsAVLT()},r.prototype.rightRotation=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{<span class="hljs-keyword">var</span> t,e,n,r,i=<span class="hljs-keyword">this</span>,o=<span class="hljs-keyword">this</span>.left;<span class="hljs-keyword">return</span> o?(t=o.right,i.parent?(o.parent=i.parent,i.parent.left===i?i.parent.left=o:i.parent.right=o):o.parent=<span class="hljs-literal">null</span>,o.right=i,i.parent=o,i.left=t,t&amp;&amp;(t.parent=i),e=o.left?o.left.height:<span class="hljs-number">0</span>,n=t?t.height:<span class="hljs-number">0</span>,r=i.right?i.right.height:<span class="hljs-number">0</span>,i.height=<span class="hljs-built_in">Math</span>.max(n,r)+<span class="hljs-number">1</span>,o.height=<span class="hljs-built_in">Math</span>.max(e,i.height)+<span class="hljs-number">1</span>,o):<span class="hljs-keyword">this</span>},r.prototype.leftRotation=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{<span class="hljs-keyword">var</span> t,e,n,r,i=<span class="hljs-keyword">this</span>,o=<span class="hljs-keyword">this</span>.right;<span class="hljs-keyword">return</span> o?(t=o.left,i.parent?(o.parent=i.parent,i.parent.left===i?i.parent.left=o:i.parent.right=o):o.parent=<span class="hljs-literal">null</span>,o.left=i,i.parent=o,i.right=t,t&amp;&amp;(t.parent=i),e=i.left?i.left.height:<span class="hljs-number">0</span>,n=t?t.height:<span class="hljs-number">0</span>,r=o.right?o.right.height:<span class="hljs-number">0</span>,i.height=<span class="hljs-built_in">Math</span>.max(e,n)+<span class="hljs-number">1</span>,o.height=<span class="hljs-built_in">Math</span>.max(r,i.height)+<span class="hljs-number">1</span>,o):<span class="hljs-keyword">this</span>},r.prototype.rightTooSmall=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.balanceFactor()&lt;=<span class="hljs-number">1</span>?<span class="hljs-keyword">this</span>:(<span class="hljs-keyword">this</span>.left.balanceFactor()&lt;<span class="hljs-number">0</span>&amp;&amp;<span class="hljs-keyword">this</span>.left.leftRotation(),<span class="hljs-keyword">this</span>.rightRotation())},r.prototype.leftTooSmall=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.balanceFactor()&gt;=-<span class="hljs-number">1</span>?<span class="hljs-keyword">this</span>:(<span class="hljs-keyword">this</span>.right.balanceFactor()&gt;<span class="hljs-number">0</span>&amp;&amp;<span class="hljs-keyword">this</span>.right.rightRotation(),<span class="hljs-keyword">this</span>.leftRotation())},r.prototype.rebalanceAlongPath=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{<span class="hljs-keyword">var</span> e,n,r=<span class="hljs-keyword">this</span>;<span class="hljs-keyword">if</span>(!<span class="hljs-keyword">this</span>.hasOwnProperty(<span class="hljs-string">"key"</span>))<span class="hljs-keyword">return</span> <span class="hljs-keyword">delete</span> <span class="hljs-keyword">this</span>.height,<span class="hljs-keyword">this</span>;<span class="hljs-keyword">for</span>(n=t.length-<span class="hljs-number">1</span>;n&gt;=<span class="hljs-number">0</span>;n-=<span class="hljs-number">1</span>)t[n].height=<span class="hljs-number">1</span>+<span class="hljs-built_in">Math</span>.max(t[n].left?t[n].left.height:<span class="hljs-number">0</span>,t[n].right?t[n].right.height:<span class="hljs-number">0</span>),t[n].balanceFactor()&gt;<span class="hljs-number">1</span>&amp;&amp;(e=t[n].rightTooSmall(),<span class="hljs-number">0</span>===n&amp;&amp;(r=e)),t[n].balanceFactor()&lt;-<span class="hljs-number">1</span>&amp;&amp;(e=t[n].leftTooSmall(),<span class="hljs-number">0</span>===n&amp;&amp;(r=e));<span class="hljs-keyword">return</span> r},r.prototype.insert=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e)</span></span>{<span class="hljs-keyword">var</span> n=[],r=<span class="hljs-keyword">this</span>;<span class="hljs-keyword">if</span>(!<span class="hljs-keyword">this</span>.hasOwnProperty(<span class="hljs-string">"key"</span>))<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.key=t,<span class="hljs-keyword">this</span>.data.push(e),<span class="hljs-keyword">this</span>.height=<span class="hljs-number">1</span>,<span class="hljs-keyword">this</span>;<span class="hljs-keyword">for</span>(;;){<span class="hljs-keyword">if</span>(<span class="hljs-number">0</span>===r.compareKeys(r.key,t)){<span class="hljs-keyword">if</span>(r.unique)<span class="hljs-keyword">throw</span>{message:<span class="hljs-string">"Can't insert key "</span>+t+<span class="hljs-string">", it violates the unique constraint"</span>,key:t,errorType:<span class="hljs-string">"uniqueViolated"</span>};<span class="hljs-keyword">return</span> r.data.push(e),<span class="hljs-keyword">this</span>}<span class="hljs-keyword">if</span>(n.push(r),r.compareKeys(t,r.key)&lt;<span class="hljs-number">0</span>){<span class="hljs-keyword">if</span>(!r.left){n.push(r.createLeftChild({key:t,value:e}));<span class="hljs-keyword">break</span>}r=r.left}<span class="hljs-keyword">else</span>{<span class="hljs-keyword">if</span>(!r.right){n.push(r.createRightChild({key:t,value:e}));<span class="hljs-keyword">break</span>}r=r.right}}<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.rebalanceAlongPath(n)},n.prototype.insert=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e)</span></span>{<span class="hljs-keyword">var</span> n=<span class="hljs-keyword">this</span>.tree.insert(t,e);n&amp;&amp;(<span class="hljs-keyword">this</span>.tree=n)},r.prototype.delete=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e)</span></span>{<span class="hljs-keyword">var</span> n,r=[],i=<span class="hljs-keyword">this</span>,o=[];<span class="hljs-keyword">if</span>(!<span class="hljs-keyword">this</span>.hasOwnProperty(<span class="hljs-string">"key"</span>))<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;<span class="hljs-keyword">for</span>(;;){<span class="hljs-keyword">if</span>(<span class="hljs-number">0</span>===i.compareKeys(t,i.key))<span class="hljs-keyword">break</span>;<span class="hljs-keyword">if</span>(o.push(i),i.compareKeys(t,i.key)&lt;<span class="hljs-number">0</span>){<span class="hljs-keyword">if</span>(!i.left)<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;i=i.left}<span class="hljs-keyword">else</span>{<span class="hljs-keyword">if</span>(!i.right)<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;i=i.right}}<span class="hljs-keyword">if</span>(i.data.length&gt;<span class="hljs-number">1</span>&amp;&amp;e)<span class="hljs-keyword">return</span> i.data.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{i.checkValueEquality(t,e)||r.push(t)}),i.data=r,<span class="hljs-keyword">this</span>;<span class="hljs-keyword">if</span>(!i.left&amp;&amp;!i.right)<span class="hljs-keyword">return</span> i===<span class="hljs-keyword">this</span>?(<span class="hljs-keyword">delete</span> i.key,i.data=[],<span class="hljs-keyword">delete</span> i.height,<span class="hljs-keyword">this</span>):(i.parent.left===i?i.parent.left=<span class="hljs-literal">null</span>:i.parent.right=<span class="hljs-literal">null</span>,<span class="hljs-keyword">this</span>.rebalanceAlongPath(o));<span class="hljs-keyword">if</span>(!i.left||!i.right)<span class="hljs-keyword">return</span> n=i.left?i.left:i.right,i===<span class="hljs-keyword">this</span>?(n.parent=<span class="hljs-literal">null</span>,n):(i.parent.left===i?(i.parent.left=n,n.parent=i.parent):(i.parent.right=n,n.parent=i.parent),<span class="hljs-keyword">this</span>.rebalanceAlongPath(o));<span class="hljs-keyword">if</span>(o.push(i),n=i.left,!n.right)<span class="hljs-keyword">return</span> i.key=n.key,i.data=n.data,i.left=n.left,n.left&amp;&amp;(n.left.parent=i),<span class="hljs-keyword">this</span>.rebalanceAlongPath(o);<span class="hljs-keyword">for</span>(;;){<span class="hljs-keyword">if</span>(!n.right)<span class="hljs-keyword">break</span>;o.push(n),n=n.right}<span class="hljs-keyword">return</span> i.key=n.key,i.data=n.data,n.parent.right=n.left,n.left&amp;&amp;(n.left.parent=n.parent),<span class="hljs-keyword">this</span>.rebalanceAlongPath(o)},n.prototype.delete=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e)</span></span>{<span class="hljs-keyword">var</span> n=<span class="hljs-keyword">this</span>.tree.delete(t,e);n&amp;&amp;(<span class="hljs-keyword">this</span>.tree=n)},[<span class="hljs-string">"getNumberOfKeys"</span>,<span class="hljs-string">"search"</span>,<span class="hljs-string">"betweenBounds"</span>,<span class="hljs-string">"prettyPrint"</span>,<span class="hljs-string">"executeOnEveryNode"</span>].forEach(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{n.prototype[t]=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.tree[t].apply(<span class="hljs-keyword">this</span>.tree,<span class="hljs-built_in">arguments</span>)}}),e.exports=n},{<span class="hljs-string">"./bst"</span>:<span class="hljs-number">14</span>,<span class="hljs-string">"./customUtils"</span>:<span class="hljs-number">15</span>,underscore:<span class="hljs-number">16</span>,util:<span class="hljs-number">2</span>}],<span class="hljs-number">14</span>:[<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e)</span></span>{<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">n</span><span class="hljs-params">(t)</span></span>{t=t||{},<span class="hljs-keyword">this</span>.left=<span class="hljs-literal">null</span>,<span class="hljs-keyword">this</span>.right=<span class="hljs-literal">null</span>,<span class="hljs-keyword">this</span>.parent=<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>!==t.parent?t.parent:<span class="hljs-literal">null</span>,t.hasOwnProperty(<span class="hljs-string">"key"</span>)&amp;&amp;(<span class="hljs-keyword">this</span>.key=t.key),<span class="hljs-keyword">this</span>.data=t.hasOwnProperty(<span class="hljs-string">"value"</span>)?[t.value]:[],<span class="hljs-keyword">this</span>.unique=t.unique||!<span class="hljs-number">1</span>,<span class="hljs-keyword">this</span>.compareKeys=t.compareKeys||i.defaultCompareKeysFunction,<span class="hljs-keyword">this</span>.checkValueEquality=t.checkValueEquality||i.defaultCheckValueEquality}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">r</span><span class="hljs-params">(t,e)</span></span>{<span class="hljs-keyword">var</span> n;<span class="hljs-keyword">for</span>(n=<span class="hljs-number">0</span>;n&lt;e.length;n+=<span class="hljs-number">1</span>)t.push(e[n])}<span class="hljs-keyword">var</span> i=t(<span class="hljs-string">"./customUtils"</span>);n.prototype.getMaxKeyDescendant=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.right?<span class="hljs-keyword">this</span>.right.getMaxKeyDescendant():<span class="hljs-keyword">this</span>},n.prototype.getMaxKey=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.getMaxKeyDescendant().key},n.prototype.getMinKeyDescendant=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.left?<span class="hljs-keyword">this</span>.left.getMinKeyDescendant():<span class="hljs-keyword">this</span>},n.prototype.getMinKey=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.getMinKeyDescendant().key},n.prototype.checkAllNodesFullfillCondition=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{<span class="hljs-keyword">this</span>.hasOwnProperty(<span class="hljs-string">"key"</span>)&amp;&amp;(t(<span class="hljs-keyword">this</span>.key,<span class="hljs-keyword">this</span>.data),<span class="hljs-keyword">this</span>.left&amp;&amp;<span class="hljs-keyword">this</span>.left.checkAllNodesFullfillCondition(t),<span class="hljs-keyword">this</span>.right&amp;&amp;<span class="hljs-keyword">this</span>.right.checkAllNodesFullfillCondition(t))},n.prototype.checkNodeOrdering=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{<span class="hljs-keyword">var</span> t=<span class="hljs-keyword">this</span>;<span class="hljs-keyword">this</span>.hasOwnProperty(<span class="hljs-string">"key"</span>)&amp;&amp;(<span class="hljs-keyword">this</span>.left&amp;&amp;(<span class="hljs-keyword">this</span>.left.checkAllNodesFullfillCondition(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span></span>{<span class="hljs-keyword">if</span>(t.compareKeys(e,t.key)&gt;=<span class="hljs-number">0</span>)<span class="hljs-keyword">throw</span><span class="hljs-string">"Tree with root "</span>+t.key+<span class="hljs-string">" is not a binary search tree"</span>}),<span class="hljs-keyword">this</span>.left.checkNodeOrdering()),<span class="hljs-keyword">this</span>.right&amp;&amp;(<span class="hljs-keyword">this</span>.right.checkAllNodesFullfillCondition(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span></span>{<span class="hljs-keyword">if</span>(t.compareKeys(e,t.key)&lt;=<span class="hljs-number">0</span>)<span class="hljs-keyword">throw</span><span class="hljs-string">"Tree with root "</span>+t.key+<span class="hljs-string">" is not a binary search tree"</span>}),<span class="hljs-keyword">this</span>.right.checkNodeOrdering()))},n.prototype.checkInternalPointers=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.left){<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.left.parent!==<span class="hljs-keyword">this</span>)<span class="hljs-keyword">throw</span><span class="hljs-string">"Parent pointer broken for key "</span>+<span class="hljs-keyword">this</span>.key;<span class="hljs-keyword">this</span>.left.checkInternalPointers()}<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.right){<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.right.parent!==<span class="hljs-keyword">this</span>)<span class="hljs-keyword">throw</span><span class="hljs-string">"Parent pointer broken for key "</span>+<span class="hljs-keyword">this</span>.key;<span class="hljs-keyword">this</span>.right.checkInternalPointers()}},n.prototype.checkIsBST=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.checkNodeOrdering(),<span class="hljs-keyword">this</span>.checkInternalPointers(),<span class="hljs-keyword">this</span>.parent)<span class="hljs-keyword">throw</span><span class="hljs-string">"The root shouldn't have a parent"</span>},n.prototype.getNumberOfKeys=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{<span class="hljs-keyword">var</span> t;<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.hasOwnProperty(<span class="hljs-string">"key"</span>)?(t=<span class="hljs-number">1</span>,<span class="hljs-keyword">this</span>.left&amp;&amp;(t+=<span class="hljs-keyword">this</span>.left.getNumberOfKeys()),<span class="hljs-keyword">this</span>.right&amp;&amp;(t+=<span class="hljs-keyword">this</span>.right.getNumberOfKeys()),t):<span class="hljs-number">0</span>},n.prototype.createSimilar=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{<span class="hljs-keyword">return</span> t=t||{},t.unique=<span class="hljs-keyword">this</span>.unique,t.compareKeys=<span class="hljs-keyword">this</span>.compareKeys,t.checkValueEquality=<span class="hljs-keyword">this</span>.checkValueEquality,<span class="hljs-keyword">new</span> <span class="hljs-keyword">this</span>.constructor(t)},n.prototype.createLeftChild=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{<span class="hljs-keyword">var</span> e=<span class="hljs-keyword">this</span>.createSimilar(t);<span class="hljs-keyword">return</span> e.parent=<span class="hljs-keyword">this</span>,<span class="hljs-keyword">this</span>.left=e,e},n.prototype.createRightChild=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{<span class="hljs-keyword">var</span> e=<span class="hljs-keyword">this</span>.createSimilar(t);<span class="hljs-keyword">return</span> e.parent=<span class="hljs-keyword">this</span>,<span class="hljs-keyword">this</span>.right=e,e},n.prototype.insert=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e)</span></span>{<span class="hljs-keyword">if</span>(!<span class="hljs-keyword">this</span>.hasOwnProperty(<span class="hljs-string">"key"</span>))<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.key=t,<span class="hljs-keyword">this</span>.data.push(e),<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>;<span class="hljs-keyword">if</span>(<span class="hljs-number">0</span>===<span class="hljs-keyword">this</span>.compareKeys(<span class="hljs-keyword">this</span>.key,t)){<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.unique)<span class="hljs-keyword">throw</span>{message:<span class="hljs-string">"Can't insert key "</span>+t+<span class="hljs-string">", it violates the unique constraint"</span>,key:t,errorType:<span class="hljs-string">"uniqueViolated"</span>};<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.data.push(e),<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>}<span class="hljs-keyword">this</span>.compareKeys(t,<span class="hljs-keyword">this</span>.key)&lt;<span class="hljs-number">0</span>?<span class="hljs-keyword">this</span>.left?<span class="hljs-keyword">this</span>.left.insert(t,e):<span class="hljs-keyword">this</span>.createLeftChild({key:t,value:e}):<span class="hljs-keyword">this</span>.right?<span class="hljs-keyword">this</span>.right.insert(t,e):<span class="hljs-keyword">this</span>.createRightChild({key:t,value:e})},n.prototype.search=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.hasOwnProperty(<span class="hljs-string">"key"</span>)?<span class="hljs-number">0</span>===<span class="hljs-keyword">this</span>.compareKeys(<span class="hljs-keyword">this</span>.key,t)?<span class="hljs-keyword">this</span>.data:<span class="hljs-keyword">this</span>.compareKeys(t,<span class="hljs-keyword">this</span>.key)&lt;<span class="hljs-number">0</span>?<span class="hljs-keyword">this</span>.left?<span class="hljs-keyword">this</span>.left.search(t):[]:<span class="hljs-keyword">this</span>.right?<span class="hljs-keyword">this</span>.right.search(t):[]:[]},n.prototype.getLowerBoundMatcher=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{<span class="hljs-keyword">var</span> e=<span class="hljs-keyword">this</span>;<span class="hljs-keyword">return</span> t.hasOwnProperty(<span class="hljs-string">"$gt"</span>)||t.hasOwnProperty(<span class="hljs-string">"$gte"</span>)?t.hasOwnProperty(<span class="hljs-string">"$gt"</span>)&amp;&amp;t.hasOwnProperty(<span class="hljs-string">"$gte"</span>)?<span class="hljs-number">0</span>===e.compareKeys(t.$gte,t.$gt)?<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(n)</span></span>{<span class="hljs-keyword">return</span> e.compareKeys(n,t.$gt)&gt;<span class="hljs-number">0</span>}:e.compareKeys(t.$gte,t.$gt)&gt;<span class="hljs-number">0</span>?<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(n)</span></span>{<span class="hljs-keyword">return</span> e.compareKeys(n,t.$gte)&gt;=<span class="hljs-number">0</span>}:<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(n)</span></span>{<span class="hljs-keyword">return</span> e.compareKeys(n,t.$gt)&gt;<span class="hljs-number">0</span>}:t.hasOwnProperty(<span class="hljs-string">"$gt"</span>)?<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(n)</span></span>{<span class="hljs-keyword">return</span> e.compareKeys(n,t.$gt)&gt;<span class="hljs-number">0</span>}:<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(n)</span></span>{<span class="hljs-keyword">return</span> e.compareKeys(n,t.$gte)&gt;=<span class="hljs-number">0</span>}:<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{<span class="hljs-keyword">return</span>!<span class="hljs-number">0</span>}},n.prototype.getUpperBoundMatcher=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{<span class="hljs-keyword">var</span> e=<span class="hljs-keyword">this</span>;<span class="hljs-keyword">return</span> t.hasOwnProperty(<span class="hljs-string">"$lt"</span>)||t.hasOwnProperty(<span class="hljs-string">"$lte"</span>)?t.hasOwnProperty(<span class="hljs-string">"$lt"</span>)&amp;&amp;t.hasOwnProperty(<span class="hljs-string">"$lte"</span>)?<span class="hljs-number">0</span>===e.compareKeys(t.$lte,t.$lt)?<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(n)</span></span>{<span class="hljs-keyword">return</span> e.compareKeys(n,t.$lt)&lt;<span class="hljs-number">0</span>}:e.compareKeys(t.$lte,t.$lt)&lt;<span class="hljs-number">0</span>?<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(n)</span></span>{<span class="hljs-keyword">return</span> e.compareKeys(n,t.$lte)&lt;=<span class="hljs-number">0</span>}:<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(n)</span></span>{<span class="hljs-keyword">return</span> e.compareKeys(n,t.$lt)&lt;<span class="hljs-number">0</span>}:t.hasOwnProperty(<span class="hljs-string">"$lt"</span>)?<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(n)</span></span>{<span class="hljs-keyword">return</span> e.compareKeys(n,t.$lt)&lt;<span class="hljs-number">0</span>}:<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(n)</span></span>{<span class="hljs-keyword">return</span> e.compareKeys(n,t.$lte)&lt;=<span class="hljs-number">0</span>}:<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{<span class="hljs-keyword">return</span>!<span class="hljs-number">0</span>}},n.prototype.betweenBounds=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e,n)</span></span>{<span class="hljs-keyword">var</span> i=[];<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.hasOwnProperty(<span class="hljs-string">"key"</span>)?(e=e||<span class="hljs-keyword">this</span>.getLowerBoundMatcher(t),n=n||<span class="hljs-keyword">this</span>.getUpperBoundMatcher(t),e(<span class="hljs-keyword">this</span>.key)&amp;&amp;<span class="hljs-keyword">this</span>.left&amp;&amp;r(i,<span class="hljs-keyword">this</span>.left.betweenBounds(t,e,n)),e(<span class="hljs-keyword">this</span>.key)&amp;&amp;n(<span class="hljs-keyword">this</span>.key)&amp;&amp;r(i,<span class="hljs-keyword">this</span>.data),n(<span class="hljs-keyword">this</span>.key)&amp;&amp;<span class="hljs-keyword">this</span>.right&amp;&amp;r(i,<span class="hljs-keyword">this</span>.right.betweenBounds(t,e,n)),i):[]},n.prototype.deleteIfLeaf=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.left||<span class="hljs-keyword">this</span>.right?!<span class="hljs-number">1</span>:<span class="hljs-keyword">this</span>.parent?(<span class="hljs-keyword">this</span>.parent.left===<span class="hljs-keyword">this</span>?<span class="hljs-keyword">this</span>.parent.left=<span class="hljs-literal">null</span>:<span class="hljs-keyword">this</span>.parent.right=<span class="hljs-literal">null</span>,!<span class="hljs-number">0</span>):(<span class="hljs-keyword">delete</span> <span class="hljs-keyword">this</span>.key,<span class="hljs-keyword">this</span>.data=[],!<span class="hljs-number">0</span>)},n.prototype.deleteIfOnlyOneChild=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{<span class="hljs-keyword">var</span> t;<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.left&amp;&amp;!<span class="hljs-keyword">this</span>.right&amp;&amp;(t=<span class="hljs-keyword">this</span>.left),!<span class="hljs-keyword">this</span>.left&amp;&amp;<span class="hljs-keyword">this</span>.right&amp;&amp;(t=<span class="hljs-keyword">this</span>.right),t?<span class="hljs-keyword">this</span>.parent?(<span class="hljs-keyword">this</span>.parent.left===<span class="hljs-keyword">this</span>?(<span class="hljs-keyword">this</span>.parent.left=t,t.parent=<span class="hljs-keyword">this</span>.parent):(<span class="hljs-keyword">this</span>.parent.right=t,t.parent=<span class="hljs-keyword">this</span>.parent),!<span class="hljs-number">0</span>):(<span class="hljs-keyword">this</span>.key=t.key,<span class="hljs-keyword">this</span>.data=t.data,<span class="hljs-keyword">this</span>.left=<span class="hljs-literal">null</span>,t.left&amp;&amp;(<span class="hljs-keyword">this</span>.left=t.left,t.left.parent=<span class="hljs-keyword">this</span>),<span class="hljs-keyword">this</span>.right=<span class="hljs-literal">null</span>,t.right&amp;&amp;(<span class="hljs-keyword">this</span>.right=t.right,t.right.parent=<span class="hljs-keyword">this</span>),!<span class="hljs-number">0</span>):!<span class="hljs-number">1</span>},n.prototype.delete=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e)</span></span>{<span class="hljs-keyword">var</span> n,r=[],i=<span class="hljs-keyword">this</span>;<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.hasOwnProperty(<span class="hljs-string">"key"</span>)){<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.compareKeys(t,<span class="hljs-keyword">this</span>.key)&lt;<span class="hljs-number">0</span>)<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.left&amp;&amp;<span class="hljs-keyword">this</span>.left.delete(t,e),<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>;<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.compareKeys(t,<span class="hljs-keyword">this</span>.key)&gt;<span class="hljs-number">0</span>)<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.right&amp;&amp;<span class="hljs-keyword">this</span>.right.delete(t,e),<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>;<span class="hljs-keyword">if</span>(<span class="hljs-number">0</span>!==!<span class="hljs-keyword">this</span>.compareKeys(t,<span class="hljs-keyword">this</span>.key))<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.data.length&gt;<span class="hljs-number">1</span>&amp;&amp;e?(<span class="hljs-keyword">this</span>.data.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{i.checkValueEquality(t,e)||r.push(t)}),i.data=r,<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>):(<span class="hljs-keyword">this</span>.deleteIfLeaf()||<span class="hljs-keyword">this</span>.deleteIfOnlyOneChild()||(<span class="hljs-built_in">Math</span>.random()&gt;=<span class="hljs-number">.5</span>?(n=<span class="hljs-keyword">this</span>.left.getMaxKeyDescendant(),<span class="hljs-keyword">this</span>.key=n.key,<span class="hljs-keyword">this</span>.data=n.data,<span class="hljs-keyword">this</span>===n.parent?(<span class="hljs-keyword">this</span>.left=n.left,n.left&amp;&amp;(n.left.parent=n.parent)):(n.parent.right=n.left,n.left&amp;&amp;(n.left.parent=n.parent))):(n=<span class="hljs-keyword">this</span>.right.getMinKeyDescendant(),<span class="hljs-keyword">this</span>.key=n.key,<span class="hljs-keyword">this</span>.data=n.data,<span class="hljs-keyword">this</span>===n.parent?(<span class="hljs-keyword">this</span>.right=n.right,n.right&amp;&amp;(n.right.parent=n.parent)):(n.parent.left=n.right,n.right&amp;&amp;(n.right.parent=n.parent)))),<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>)}},n.prototype.executeOnEveryNode=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{<span class="hljs-keyword">this</span>.left&amp;&amp;<span class="hljs-keyword">this</span>.left.executeOnEveryNode(t),t(<span class="hljs-keyword">this</span>),<span class="hljs-keyword">this</span>.right&amp;&amp;<span class="hljs-keyword">this</span>.right.executeOnEveryNode(t)},n.prototype.prettyPrint=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e)</span></span>{e=e||<span class="hljs-string">""</span>,<span class="hljs-built_in">console</span>.log(e+<span class="hljs-string">"* "</span>+<span class="hljs-keyword">this</span>.key),t&amp;&amp;<span class="hljs-built_in">console</span>.log(e+<span class="hljs-string">"* "</span>+<span class="hljs-keyword">this</span>.data),(<span class="hljs-keyword">this</span>.left||<span class="hljs-keyword">this</span>.right)&amp;&amp;(<span class="hljs-keyword">this</span>.left?<span class="hljs-keyword">this</span>.left.prettyPrint(t,e+<span class="hljs-string">"  "</span>):<span class="hljs-built_in">console</span>.log(e+<span class="hljs-string">"  *"</span>),<span class="hljs-keyword">this</span>.right?<span class="hljs-keyword">this</span>.right.prettyPrint(t,e+<span class="hljs-string">"  "</span>):<span class="hljs-built_in">console</span>.log(e+<span class="hljs-string">"  *"</span>))},e.exports=n},{<span class="hljs-string">"./customUtils"</span>:<span class="hljs-number">15</span>}],<span class="hljs-number">15</span>:[<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e)</span></span>{<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">n</span><span class="hljs-params">(t)</span></span>{<span class="hljs-keyword">var</span> e,r;<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>===t?[]:<span class="hljs-number">1</span>===t?[<span class="hljs-number">0</span>]:(e=n(t-<span class="hljs-number">1</span>),r=<span class="hljs-built_in">Math</span>.floor(<span class="hljs-built_in">Math</span>.random()*t),e.splice(r,<span class="hljs-number">0</span>,t-<span class="hljs-number">1</span>),e)}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">r</span><span class="hljs-params">(t,e)</span></span>{<span class="hljs-keyword">if</span>(e&gt;t)<span class="hljs-keyword">return</span>-<span class="hljs-number">1</span>;<span class="hljs-keyword">if</span>(t&gt;e)<span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<span class="hljs-keyword">if</span>(t===e)<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<span class="hljs-keyword">throw</span>{message:<span class="hljs-string">"Couldn't compare elements"</span>,a:t,b:e}}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">i</span><span class="hljs-params">(t,e)</span></span>{<span class="hljs-keyword">return</span> t===e}e.exports.getRandomArray=n,e.exports.defaultCompareKeysFunction=r,e.exports.defaultCheckValueEquality=i},{}],<span class="hljs-number">16</span>:[<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e,n)</span></span>{!<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{<span class="hljs-keyword">var</span> t=<span class="hljs-keyword">this</span>,r=t._,i={},o=<span class="hljs-built_in">Array</span>.prototype,u=<span class="hljs-built_in">Object</span>.prototype,a=<span class="hljs-built_in">Function</span>.prototype,s=o.push,c=o.slice,f=o.concat,l=u.toString,h=u.hasOwnProperty,p=o.forEach,y=o.map,d=o.reduce,g=o.reduceRight,v=o.filter,m=o.every,b=o.some,w=o.indexOf,k=o.lastIndexOf,x=<span class="hljs-built_in">Array</span>.isArray,_=<span class="hljs-built_in">Object</span>.keys,O=a.bind,A=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{<span class="hljs-keyword">return</span> t <span class="hljs-keyword">instanceof</span> A?t:<span class="hljs-keyword">this</span> <span class="hljs-keyword">instanceof</span> A?(<span class="hljs-keyword">this</span>._wrapped=t,<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>):<span class="hljs-keyword">new</span> A(t)};<span class="hljs-string">"undefined"</span>!=<span class="hljs-keyword">typeof</span> n?(<span class="hljs-string">"undefined"</span>!=<span class="hljs-keyword">typeof</span> e&amp;&amp;e.exports&amp;&amp;(n=e.exports=A),n._=A):t._=A,A.VERSION=<span class="hljs-string">"1.4.4"</span>;<span class="hljs-keyword">var</span> $=A.each=A.forEach=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e,n)</span></span>{<span class="hljs-keyword">if</span>(<span class="hljs-literal">null</span>!=t)<span class="hljs-keyword">if</span>(p&amp;&amp;t.forEach===p)t.forEach(e,n);<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(t.length===+t.length){<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> r=<span class="hljs-number">0</span>,o=t.length;o&gt;r;r++)<span class="hljs-keyword">if</span>(e.call(n,t[r],r,t)===i)<span class="hljs-keyword">return</span>}<span class="hljs-keyword">else</span> <span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> u <span class="hljs-keyword">in</span> t)<span class="hljs-keyword">if</span>(A.has(t,u)&amp;&amp;e.call(n,t[u],u,t)===i)<span class="hljs-keyword">return</span>};A.map=A.collect=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e,n)</span></span>{<span class="hljs-keyword">var</span> r=[];<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>==t?r:y&amp;&amp;t.map===y?t.map(e,n):($(t,<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,i,o)</span></span>{r[r.length]=e.call(n,t,i,o)}),r)};<span class="hljs-keyword">var</span> j=<span class="hljs-string">"Reduce of empty array with no initial value"</span>;A.reduce=A.foldl=A.inject=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e,n,r)</span></span>{<span class="hljs-keyword">var</span> i=<span class="hljs-built_in">arguments</span>.length&gt;<span class="hljs-number">2</span>;<span class="hljs-keyword">if</span>(<span class="hljs-literal">null</span>==t&amp;&amp;(t=[]),d&amp;&amp;t.reduce===d)<span class="hljs-keyword">return</span> r&amp;&amp;(e=A.bind(e,r)),i?t.reduce(e,n):t.reduce(e);<span class="hljs-keyword">if</span>($(t,<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,o,u)</span></span>{i?n=e.call(r,n,t,o,u):(n=t,i=!<span class="hljs-number">0</span>)}),!i)<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">TypeError</span>(j);<span class="hljs-keyword">return</span> n},A.reduceRight=A.foldr=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e,n,r)</span></span>{<span class="hljs-keyword">var</span> i=<span class="hljs-built_in">arguments</span>.length&gt;<span class="hljs-number">2</span>;<span class="hljs-keyword">if</span>(<span class="hljs-literal">null</span>==t&amp;&amp;(t=[]),g&amp;&amp;t.reduceRight===g)<span class="hljs-keyword">return</span> r&amp;&amp;(e=A.bind(e,r)),i?t.reduceRight(e,n):t.reduceRight(e);<span class="hljs-keyword">var</span> o=t.length;<span class="hljs-keyword">if</span>(o!==+o){<span class="hljs-keyword">var</span> u=A.keys(t);o=u.length}<span class="hljs-keyword">if</span>($(t,<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(a,s,c)</span></span>{s=u?u[--o]:--o,i?n=e.call(r,n,t[s],s,c):(n=t[s],i=!<span class="hljs-number">0</span>)}),!i)<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">TypeError</span>(j);<span class="hljs-keyword">return</span> n},A.find=A.detect=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e,n)</span></span>{<span class="hljs-keyword">var</span> r;<span class="hljs-keyword">return</span> E(t,<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,i,o)</span></span>{<span class="hljs-keyword">return</span> e.call(n,t,i,o)?(r=t,!<span class="hljs-number">0</span>):<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>}),r},A.filter=A.select=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e,n)</span></span>{<span class="hljs-keyword">var</span> r=[];<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>==t?r:v&amp;&amp;t.filter===v?t.filter(e,n):($(t,<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,i,o)</span></span>{e.call(n,t,i,o)&amp;&amp;(r[r.length]=t)}),r)},A.reject=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e,n)</span></span>{<span class="hljs-keyword">return</span> A.filter(t,<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,r,i)</span></span>{<span class="hljs-keyword">return</span>!e.call(n,t,r,i)},n)},A.every=A.all=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e,n)</span></span>{e||(e=A.identity);<span class="hljs-keyword">var</span> r=!<span class="hljs-number">0</span>;<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>==t?r:m&amp;&amp;t.every===m?t.every(e,n):($(t,<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,o,u)</span></span>{<span class="hljs-keyword">return</span>(r=r&amp;&amp;e.call(n,t,o,u))?<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>:i}),!!r)};<span class="hljs-keyword">var</span> E=A.some=A.any=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e,n)</span></span>{e||(e=A.identity);<span class="hljs-keyword">var</span> r=!<span class="hljs-number">1</span>;<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>==t?r:b&amp;&amp;t.some===b?t.some(e,n):($(t,<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,o,u)</span></span>{<span class="hljs-keyword">return</span> r||(r=e.call(n,t,o,u))?i:<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>}),!!r)};A.contains=A.include=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e)</span></span>{<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>==t?!<span class="hljs-number">1</span>:w&amp;&amp;t.indexOf===w?-<span class="hljs-number">1</span>!=t.indexOf(e):E(t,<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{<span class="hljs-keyword">return</span> t===e})},A.invoke=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e)</span></span>{<span class="hljs-keyword">var</span> n=c.call(<span class="hljs-built_in">arguments</span>,<span class="hljs-number">2</span>),r=A.isFunction(e);<span class="hljs-keyword">return</span> A.map(t,<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{<span class="hljs-keyword">return</span>(r?e:t[e]).apply(t,n)})},A.pluck=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e)</span></span>{<span class="hljs-keyword">return</span> A.map(t,<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{<span class="hljs-keyword">return</span> t[e]})},A.where=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e,n)</span></span>{<span class="hljs-keyword">return</span> A.isEmpty(e)?n?<span class="hljs-literal">null</span>:[]:A[n?<span class="hljs-string">"find"</span>:<span class="hljs-string">"filter"</span>](t,<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> n <span class="hljs-keyword">in</span> e)<span class="hljs-keyword">if</span>(e[n]!==t[n])<span class="hljs-keyword">return</span>!<span class="hljs-number">1</span>;<span class="hljs-keyword">return</span>!<span class="hljs-number">0</span>})},A.findWhere=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e)</span></span>{<span class="hljs-keyword">return</span> A.where(t,e,!<span class="hljs-number">0</span>)},A.max=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e,n)</span></span>{<span class="hljs-keyword">if</span>(!e&amp;&amp;A.isArray(t)&amp;&amp;t[<span class="hljs-number">0</span>]===+t[<span class="hljs-number">0</span>]&amp;&amp;t.length&lt;<span class="hljs-number">65535</span>)<span class="hljs-keyword">return</span> <span class="hljs-built_in">Math</span>.max.apply(<span class="hljs-built_in">Math</span>,t);<span class="hljs-keyword">if</span>(!e&amp;&amp;A.isEmpty(t))<span class="hljs-keyword">return</span>-<span class="hljs-number">1</span>/<span class="hljs-number">0</span>;<span class="hljs-keyword">var</span> r={computed:-<span class="hljs-number">1</span>/<span class="hljs-number">0</span>,value:-<span class="hljs-number">1</span>/<span class="hljs-number">0</span>};<span class="hljs-keyword">return</span> $(t,<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,i,o)</span></span>{<span class="hljs-keyword">var</span> u=e?e.call(n,t,i,o):t;u&gt;=r.computed&amp;&amp;(r={value:t,computed:u})}),r.value},A.min=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e,n)</span></span>{<span class="hljs-keyword">if</span>(!e&amp;&amp;A.isArray(t)&amp;&amp;t[<span class="hljs-number">0</span>]===+t[<span class="hljs-number">0</span>]&amp;&amp;t.length&lt;<span class="hljs-number">65535</span>)<span class="hljs-keyword">return</span> <span class="hljs-built_in">Math</span>.min.apply(<span class="hljs-built_in">Math</span>,t);<span class="hljs-keyword">if</span>(!e&amp;&amp;A.isEmpty(t))<span class="hljs-keyword">return</span> <span class="hljs-number">1</span>/<span class="hljs-number">0</span>;<span class="hljs-keyword">var</span> r={computed:<span class="hljs-number">1</span>/<span class="hljs-number">0</span>,value:<span class="hljs-number">1</span>/<span class="hljs-number">0</span>};<span class="hljs-keyword">return</span> $(t,<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,i,o)</span></span>{<span class="hljs-keyword">var</span> u=e?e.call(n,t,i,o):t;u&lt;r.computed&amp;&amp;(r={value:t,computed:u})}),r.value},A.shuffle=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{<span class="hljs-keyword">var</span> e,n=<span class="hljs-number">0</span>,r=[];<span class="hljs-keyword">return</span> $(t,<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{e=A.random(n++),r[n-<span class="hljs-number">1</span>]=r[e],r[e]=t}),r};<span class="hljs-keyword">var</span> S=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{<span class="hljs-keyword">return</span> A.isFunction(t)?t:<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span></span>{<span class="hljs-keyword">return</span> e[t]}};A.sortBy=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e,n)</span></span>{<span class="hljs-keyword">var</span> r=S(e);<span class="hljs-keyword">return</span> A.pluck(A.map(t,<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e,i)</span></span>{<span class="hljs-keyword">return</span>{value:t,index:e,criteria:r.call(n,t,e,i)}}).sort(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e)</span></span>{<span class="hljs-keyword">var</span> n=t.criteria,r=e.criteria;<span class="hljs-keyword">if</span>(n!==r){<span class="hljs-keyword">if</span>(n&gt;r||<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>===n)<span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<span class="hljs-keyword">if</span>(r&gt;n||<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>===r)<span class="hljs-keyword">return</span>-<span class="hljs-number">1</span>}<span class="hljs-keyword">return</span> t.index&lt;e.index?-<span class="hljs-number">1</span>:<span class="hljs-number">1</span>}),<span class="hljs-string">"value"</span>)};<span class="hljs-keyword">var</span> D=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e,n,r)</span></span>{<span class="hljs-keyword">var</span> i={},o=S(e||A.identity);<span class="hljs-keyword">return</span> $(t,<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e,u)</span></span>{<span class="hljs-keyword">var</span> a=o.call(n,e,u,t);r(i,a,e)}),i};A.groupBy=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e,n)</span></span>{<span class="hljs-keyword">return</span> D(t,e,n,<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e,n)</span></span>{(A.has(t,e)?t[e]:t[e]=[]).push(n)})},A.countBy=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e,n)</span></span>{<span class="hljs-keyword">return</span> D(t,e,n,<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e)</span></span>{A.has(t,e)||(t[e]=<span class="hljs-number">0</span>),t[e]++})},A.sortedIndex=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e,n,r)</span></span>{n=<span class="hljs-literal">null</span>==n?A.identity:S(n);<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i=n.call(r,e),o=<span class="hljs-number">0</span>,u=t.length;u&gt;o;){<span class="hljs-keyword">var</span> a=o+u&gt;&gt;&gt;<span class="hljs-number">1</span>;n.call(r,t[a])&lt;i?o=a+<span class="hljs-number">1</span>:u=a}<span class="hljs-keyword">return</span> o},A.toArray=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{<span class="hljs-keyword">return</span> t?A.isArray(t)?c.call(t):t.length===+t.length?A.map(t,A.identity):A.values(t):[]},A.size=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>==t?<span class="hljs-number">0</span>:t.length===+t.length?t.length:A.keys(t).length},A.first=A.head=A.take=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e,n)</span></span>{<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>==t?<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>:<span class="hljs-literal">null</span>==e||n?t[<span class="hljs-number">0</span>]:c.call(t,<span class="hljs-number">0</span>,e)},A.initial=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e,n)</span></span>{<span class="hljs-keyword">return</span> c.call(t,<span class="hljs-number">0</span>,t.length-(<span class="hljs-literal">null</span>==e||n?<span class="hljs-number">1</span>:e))},A.last=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e,n)</span></span>{<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>==t?<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>:<span class="hljs-literal">null</span>==e||n?t[t.length-<span class="hljs-number">1</span>]:c.call(t,<span class="hljs-built_in">Math</span>.max(t.length-e,<span class="hljs-number">0</span>))},A.rest=A.tail=A.drop=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e,n)</span></span>{<span class="hljs-keyword">return</span> c.call(t,<span class="hljs-literal">null</span>==e||n?<span class="hljs-number">1</span>:e)},A.compact=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{<span class="hljs-keyword">return</span> A.filter(t,A.identity)};<span class="hljs-keyword">var</span> M=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e,n)</span></span>{<span class="hljs-keyword">return</span> $(t,<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{A.isArray(t)?e?s.apply(n,t):M(t,e,n):n.push(t)}),n};A.flatten=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e)</span></span>{<span class="hljs-keyword">return</span> M(t,e,[])},A.without=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{<span class="hljs-keyword">return</span> A.difference(t,c.call(<span class="hljs-built_in">arguments</span>,<span class="hljs-number">1</span>))},A.uniq=A.unique=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e,n,r)</span></span>{A.isFunction(e)&amp;&amp;(r=n,n=e,e=!<span class="hljs-number">1</span>);<span class="hljs-keyword">var</span> i=n?A.map(t,n,r):t,o=[],u=[];<span class="hljs-keyword">return</span> $(i,<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(n,r)</span></span>{(e?r&amp;&amp;u[u.length-<span class="hljs-number">1</span>]===n:A.contains(u,n))||(u.push(n),o.push(t[r]))}),o},A.union=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{<span class="hljs-keyword">return</span> A.uniq(f.apply(o,<span class="hljs-built_in">arguments</span>))},A.intersection=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{<span class="hljs-keyword">var</span> e=c.call(<span class="hljs-built_in">arguments</span>,<span class="hljs-number">1</span>);<span class="hljs-keyword">return</span> A.filter(A.uniq(t),<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{<span class="hljs-keyword">return</span> A.every(e,<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span></span>{<span class="hljs-keyword">return</span> A.indexOf(e,t)&gt;=<span class="hljs-number">0</span>})})},A.difference=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{<span class="hljs-keyword">var</span> e=f.apply(o,c.call(<span class="hljs-built_in">arguments</span>,<span class="hljs-number">1</span>));<span class="hljs-keyword">return</span> A.filter(t,<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{<span class="hljs-keyword">return</span>!A.contains(e,t)})},A.zip=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> t=c.call(<span class="hljs-built_in">arguments</span>),e=A.max(A.pluck(t,<span class="hljs-string">"length"</span>)),n=<span class="hljs-keyword">new</span> <span class="hljs-built_in">Array</span>(e),r=<span class="hljs-number">0</span>;e&gt;r;r++)n[r]=A.pluck(t,<span class="hljs-string">""</span>+r);<span class="hljs-keyword">return</span> n},A.object=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e)</span></span>{<span class="hljs-keyword">if</span>(<span class="hljs-literal">null</span>==t)<span class="hljs-keyword">return</span>{};<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> n={},r=<span class="hljs-number">0</span>,i=t.length;i&gt;r;r++)e?n[t[r]]=e[r]:n[t[r][<span class="hljs-number">0</span>]]=t[r][<span class="hljs-number">1</span>];<span class="hljs-keyword">return</span> n},A.indexOf=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e,n)</span></span>{<span class="hljs-keyword">if</span>(<span class="hljs-literal">null</span>==t)<span class="hljs-keyword">return</span>-<span class="hljs-number">1</span>;<span class="hljs-keyword">var</span> r=<span class="hljs-number">0</span>,i=t.length;<span class="hljs-keyword">if</span>(n){<span class="hljs-keyword">if</span>(<span class="hljs-string">"number"</span>!=<span class="hljs-keyword">typeof</span> n)<span class="hljs-keyword">return</span> r=A.sortedIndex(t,e),t[r]===e?r:-<span class="hljs-number">1</span>;r=<span class="hljs-number">0</span>&gt;n?<span class="hljs-built_in">Math</span>.max(<span class="hljs-number">0</span>,i+n):n}<span class="hljs-keyword">if</span>(w&amp;&amp;t.indexOf===w)<span class="hljs-keyword">return</span> t.indexOf(e,n);<span class="hljs-keyword">for</span>(;i&gt;r;r++)<span class="hljs-keyword">if</span>(t[r]===e)<span class="hljs-keyword">return</span> r;<span class="hljs-keyword">return</span>-<span class="hljs-number">1</span>},A.lastIndexOf=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e,n)</span></span>{<span class="hljs-keyword">if</span>(<span class="hljs-literal">null</span>==t)<span class="hljs-keyword">return</span>-<span class="hljs-number">1</span>;<span class="hljs-keyword">var</span> r=<span class="hljs-literal">null</span>!=n;<span class="hljs-keyword">if</span>(k&amp;&amp;t.lastIndexOf===k)<span class="hljs-keyword">return</span> r?t.lastIndexOf(e,n):t.lastIndexOf(e);<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i=r?n:t.length;i--;)<span class="hljs-keyword">if</span>(t[i]===e)<span class="hljs-keyword">return</span> i;<span class="hljs-keyword">return</span>-<span class="hljs-number">1</span>},A.range=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e,n)</span></span>{<span class="hljs-built_in">arguments</span>.length&lt;=<span class="hljs-number">1</span>&amp;&amp;(e=t||<span class="hljs-number">0</span>,t=<span class="hljs-number">0</span>),n=<span class="hljs-built_in">arguments</span>[<span class="hljs-number">2</span>]||<span class="hljs-number">1</span>;<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> r=<span class="hljs-built_in">Math</span>.max(<span class="hljs-built_in">Math</span>.ceil((e-t)/n),<span class="hljs-number">0</span>),i=<span class="hljs-number">0</span>,o=<span class="hljs-keyword">new</span> <span class="hljs-built_in">Array</span>(r);r&gt;i;)o[i++]=t,t+=n;<span class="hljs-keyword">return</span> o},A.bind=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e)</span></span>{<span class="hljs-keyword">if</span>(t.bind===O&amp;&amp;O)<span class="hljs-keyword">return</span> O.apply(t,c.call(<span class="hljs-built_in">arguments</span>,<span class="hljs-number">1</span>));<span class="hljs-keyword">var</span> n=c.call(<span class="hljs-built_in">arguments</span>,<span class="hljs-number">2</span>);<span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{<span class="hljs-keyword">return</span> t.apply(e,n.concat(c.call(<span class="hljs-built_in">arguments</span>)))}},A.partial=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{<span class="hljs-keyword">var</span> e=c.call(<span class="hljs-built_in">arguments</span>,<span class="hljs-number">1</span>);<span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{<span class="hljs-keyword">return</span> t.apply(<span class="hljs-keyword">this</span>,e.concat(c.call(<span class="hljs-built_in">arguments</span>)))}},A.bindAll=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{<span class="hljs-keyword">var</span> e=c.call(<span class="hljs-built_in">arguments</span>,<span class="hljs-number">1</span>);<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>===e.length&amp;&amp;(e=A.functions(t)),$(e,<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span></span>{t[e]=A.bind(t[e],t)}),t},A.memoize=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e)</span></span>{<span class="hljs-keyword">var</span> n={};<span class="hljs-keyword">return</span> e||(e=A.identity),<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{<span class="hljs-keyword">var</span> r=e.apply(<span class="hljs-keyword">this</span>,<span class="hljs-built_in">arguments</span>);<span class="hljs-keyword">return</span> A.has(n,r)?n[r]:n[r]=t.apply(<span class="hljs-keyword">this</span>,<span class="hljs-built_in">arguments</span>)}},A.delay=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e)</span></span>{<span class="hljs-keyword">var</span> n=c.call(<span class="hljs-built_in">arguments</span>,<span class="hljs-number">2</span>);<span class="hljs-keyword">return</span> setTimeout(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{<span class="hljs-keyword">return</span> t.apply(<span class="hljs-literal">null</span>,n)},e)},A.defer=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{<span class="hljs-keyword">return</span> A.delay.apply(A,[t,<span class="hljs-number">1</span>].concat(c.call(<span class="hljs-built_in">arguments</span>,<span class="hljs-number">1</span>)))},A.throttle=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e)</span></span>{<span class="hljs-keyword">var</span> n,r,i,o,u=<span class="hljs-number">0</span>,a=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{u=<span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>,i=<span class="hljs-literal">null</span>,o=t.apply(n,r)};<span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{<span class="hljs-keyword">var</span> s=<span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>,c=e-(s-u);<span class="hljs-keyword">return</span> n=<span class="hljs-keyword">this</span>,r=<span class="hljs-built_in">arguments</span>,<span class="hljs-number">0</span>&gt;=c?(clearTimeout(i),i=<span class="hljs-literal">null</span>,u=s,o=t.apply(n,r)):i||(i=setTimeout(a,c)),o}},A.debounce=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e,n)</span></span>{<span class="hljs-keyword">var</span> r,i;<span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{<span class="hljs-keyword">var</span> o=<span class="hljs-keyword">this</span>,u=<span class="hljs-built_in">arguments</span>,a=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{r=<span class="hljs-literal">null</span>,n||(i=t.apply(o,u))},s=n&amp;&amp;!r;<span class="hljs-keyword">return</span> clearTimeout(r),r=setTimeout(a,e),s&amp;&amp;(i=t.apply(o,u)),i}},A.once=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{<span class="hljs-keyword">var</span> e,n=!<span class="hljs-number">1</span>;<span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{<span class="hljs-keyword">return</span> n?e:(n=!<span class="hljs-number">0</span>,e=t.apply(<span class="hljs-keyword">this</span>,<span class="hljs-built_in">arguments</span>),t=<span class="hljs-literal">null</span>,e)}},A.wrap=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e)</span></span>{<span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{<span class="hljs-keyword">var</span> n=[t];<span class="hljs-keyword">return</span> s.apply(n,<span class="hljs-built_in">arguments</span>),e.apply(<span class="hljs-keyword">this</span>,n)}},A.compose=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{<span class="hljs-keyword">var</span> t=<span class="hljs-built_in">arguments</span>;<span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> e=<span class="hljs-built_in">arguments</span>,n=t.length-<span class="hljs-number">1</span>;n&gt;=<span class="hljs-number">0</span>;n--)e=[t[n].apply(<span class="hljs-keyword">this</span>,e)];<span class="hljs-keyword">return</span> e[<span class="hljs-number">0</span>]}},A.after=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e)</span></span>{<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>&gt;=t?e():<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{<span class="hljs-keyword">return</span>--t&lt;<span class="hljs-number">1</span>?e.apply(<span class="hljs-keyword">this</span>,<span class="hljs-built_in">arguments</span>):<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>}},A.keys=_||<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{<span class="hljs-keyword">if</span>(t!==<span class="hljs-built_in">Object</span>(t))<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">TypeError</span>(<span class="hljs-string">"Invalid object"</span>);<span class="hljs-keyword">var</span> e=[];<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> n <span class="hljs-keyword">in</span> t)A.has(t,n)&amp;&amp;(e[e.length]=n);<span class="hljs-keyword">return</span> e},A.values=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{<span class="hljs-keyword">var</span> e=[];<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> n <span class="hljs-keyword">in</span> t)A.has(t,n)&amp;&amp;e.push(t[n]);<span class="hljs-keyword">return</span> e},A.pairs=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{<span class="hljs-keyword">var</span> e=[];<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> n <span class="hljs-keyword">in</span> t)A.has(t,n)&amp;&amp;e.push([n,t[n]]);<span class="hljs-keyword">return</span> e},A.invert=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{<span class="hljs-keyword">var</span> e={};<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> n <span class="hljs-keyword">in</span> t)A.has(t,n)&amp;&amp;(e[t[n]]=n);<span class="hljs-keyword">return</span> e},A.functions=A.methods=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{<span class="hljs-keyword">var</span> e=[];<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> n <span class="hljs-keyword">in</span> t)A.isFunction(t[n])&amp;&amp;e.push(n);<span class="hljs-keyword">return</span> e.sort()},A.extend=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{<span class="hljs-keyword">return</span> $(c.call(<span class="hljs-built_in">arguments</span>,<span class="hljs-number">1</span>),<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span></span>{<span class="hljs-keyword">if</span>(e)<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> n <span class="hljs-keyword">in</span> e)t[n]=e[n]}),t},A.pick=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{<span class="hljs-keyword">var</span> e={},n=f.apply(o,c.call(<span class="hljs-built_in">arguments</span>,<span class="hljs-number">1</span>));<span class="hljs-keyword">return</span> $(n,<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(n)</span></span>{n <span class="hljs-keyword">in</span> t&amp;&amp;(e[n]=t[n])}),e},A.omit=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{<span class="hljs-keyword">var</span> e={},n=f.apply(o,c.call(<span class="hljs-built_in">arguments</span>,<span class="hljs-number">1</span>));<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> r <span class="hljs-keyword">in</span> t)A.contains(n,r)||(e[r]=t[r]);<span class="hljs-keyword">return</span> e},A.defaults=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{<span class="hljs-keyword">return</span> $(c.call(<span class="hljs-built_in">arguments</span>,<span class="hljs-number">1</span>),<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span></span>{<span class="hljs-keyword">if</span>(e)<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> n <span class="hljs-keyword">in</span> e)<span class="hljs-literal">null</span>==t[n]&amp;&amp;(t[n]=e[n])}),t},A.clone=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{<span class="hljs-keyword">return</span> A.isObject(t)?A.isArray(t)?t.slice():A.extend({},t):t},A.tap=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e)</span></span>{<span class="hljs-keyword">return</span> e(t),t};<span class="hljs-keyword">var</span> T=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e,n,r)</span></span>{<span class="hljs-keyword">if</span>(t===e)<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>!==t||<span class="hljs-number">1</span>/t==<span class="hljs-number">1</span>/e;<span class="hljs-keyword">if</span>(<span class="hljs-literal">null</span>==t||<span class="hljs-literal">null</span>==e)<span class="hljs-keyword">return</span> t===e;t <span class="hljs-keyword">instanceof</span> A&amp;&amp;(t=t._wrapped),e <span class="hljs-keyword">instanceof</span> A&amp;&amp;(e=e._wrapped);<span class="hljs-keyword">var</span> i=l.call(t);<span class="hljs-keyword">if</span>(i!=l.call(e))<span class="hljs-keyword">return</span>!<span class="hljs-number">1</span>;<span class="hljs-keyword">switch</span>(i){<span class="hljs-keyword">case</span><span class="hljs-string">"[object String]"</span>:<span class="hljs-keyword">return</span> t==<span class="hljs-built_in">String</span>(e);<span class="hljs-keyword">case</span><span class="hljs-string">"[object Number]"</span>:<span class="hljs-keyword">return</span> t!=+t?e!=+e:<span class="hljs-number">0</span>==t?<span class="hljs-number">1</span>/t==<span class="hljs-number">1</span>/e:t==+e;<span class="hljs-keyword">case</span><span class="hljs-string">"[object Date]"</span>:<span class="hljs-keyword">case</span><span class="hljs-string">"[object Boolean]"</span>:<span class="hljs-keyword">return</span>+t==+e;<span class="hljs-keyword">case</span><span class="hljs-string">"[object RegExp]"</span>:<span class="hljs-keyword">return</span> t.source==e.source&amp;&amp;t.global==e.global&amp;&amp;t.multiline==e.multiline&amp;&amp;t.ignoreCase==e.ignoreCase}<span class="hljs-keyword">if</span>(<span class="hljs-string">"object"</span>!=<span class="hljs-keyword">typeof</span> t||<span class="hljs-string">"object"</span>!=<span class="hljs-keyword">typeof</span> e)<span class="hljs-keyword">return</span>!<span class="hljs-number">1</span>;<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> o=n.length;o--;)<span class="hljs-keyword">if</span>(n[o]==t)<span class="hljs-keyword">return</span> r[o]==e;n.push(t),r.push(e);<span class="hljs-keyword">var</span> u=<span class="hljs-number">0</span>,a=!<span class="hljs-number">0</span>;<span class="hljs-keyword">if</span>(<span class="hljs-string">"[object Array]"</span>==i){<span class="hljs-keyword">if</span>(u=t.length,a=u==e.length)<span class="hljs-keyword">for</span>(;u--&amp;&amp;(a=T(t[u],e[u],n,r)););}<span class="hljs-keyword">else</span>{<span class="hljs-keyword">var</span> s=t.constructor,c=e.constructor;<span class="hljs-keyword">if</span>(s!==c&amp;&amp;!(A.isFunction(s)&amp;&amp;s <span class="hljs-keyword">instanceof</span> s&amp;&amp;A.isFunction(c)&amp;&amp;c <span class="hljs-keyword">instanceof</span> c))<span class="hljs-keyword">return</span>!<span class="hljs-number">1</span>;<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> f <span class="hljs-keyword">in</span> t)<span class="hljs-keyword">if</span>(A.has(t,f)&amp;&amp;(u++,!(a=A.has(e,f)&amp;&amp;T(t[f],e[f],n,r))))<span class="hljs-keyword">break</span>;<span class="hljs-keyword">if</span>(a){<span class="hljs-keyword">for</span>(f <span class="hljs-keyword">in</span> e)<span class="hljs-keyword">if</span>(A.has(e,f)&amp;&amp;!u--)<span class="hljs-keyword">break</span>;a=!u}}<span class="hljs-keyword">return</span> n.pop(),r.pop(),a};A.isEqual=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e)</span></span>{<span class="hljs-keyword">return</span> T(t,e,[],[])},A.isEmpty=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{<span class="hljs-keyword">if</span>(<span class="hljs-literal">null</span>==t)<span class="hljs-keyword">return</span>!<span class="hljs-number">0</span>;<span class="hljs-keyword">if</span>(A.isArray(t)||A.isString(t))<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>===t.length;<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> e <span class="hljs-keyword">in</span> t)<span class="hljs-keyword">if</span>(A.has(t,e))<span class="hljs-keyword">return</span>!<span class="hljs-number">1</span>;<span class="hljs-keyword">return</span>!<span class="hljs-number">0</span>},A.isElement=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{<span class="hljs-keyword">return</span>!(!t||<span class="hljs-number">1</span>!==t.nodeType)},A.isArray=x||<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{<span class="hljs-keyword">return</span><span class="hljs-string">"[object Array]"</span>==l.call(t)},A.isObject=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{<span class="hljs-keyword">return</span> t===<span class="hljs-built_in">Object</span>(t)},$([<span class="hljs-string">"Arguments"</span>,<span class="hljs-string">"Function"</span>,<span class="hljs-string">"String"</span>,<span class="hljs-string">"Number"</span>,<span class="hljs-string">"Date"</span>,<span class="hljs-string">"RegExp"</span>],<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{A[<span class="hljs-string">"is"</span>+t]=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span></span>{<span class="hljs-keyword">return</span> l.call(e)==<span class="hljs-string">"[object "</span>+t+<span class="hljs-string">"]"</span>}}),A.isArguments(<span class="hljs-built_in">arguments</span>)||(A.isArguments=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{<span class="hljs-keyword">return</span>!(!t||!A.has(t,<span class="hljs-string">"callee"</span>))}),<span class="hljs-string">"function"</span>!=<span class="hljs-keyword">typeof</span>/./&amp;&amp;(A.isFunction=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{<span class="hljs-keyword">return</span><span class="hljs-string">"function"</span>==<span class="hljs-keyword">typeof</span> t}),A.isFinite=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{<span class="hljs-keyword">return</span> <span class="hljs-built_in">isFinite</span>(t)&amp;&amp;!<span class="hljs-built_in">isNaN</span>(<span class="hljs-built_in">parseFloat</span>(t))},A.isNaN=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{<span class="hljs-keyword">return</span> A.isNumber(t)&amp;&amp;t!=+t},A.isBoolean=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{<span class="hljs-keyword">return</span> t===!<span class="hljs-number">0</span>||t===!<span class="hljs-number">1</span>||<span class="hljs-string">"[object Boolean]"</span>==l.call(t)},A.isNull=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>===t},A.isUndefined=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">void</span> <span class="hljs-number">0</span>===t},A.has=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e)</span></span>{<span class="hljs-keyword">return</span> h.call(t,e)},A.noConflict=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{<span class="hljs-keyword">return</span> t._=r,<span class="hljs-keyword">this</span>},A.identity=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{<span class="hljs-keyword">return</span> t},A.times=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e,n)</span></span>{<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> r=<span class="hljs-built_in">Array</span>(t),i=<span class="hljs-number">0</span>;t&gt;i;i++)r[i]=e.call(n,i);<span class="hljs-keyword">return</span> r},A.random=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e)</span></span>{<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>==e&amp;&amp;(e=t,t=<span class="hljs-number">0</span>),t+<span class="hljs-built_in">Math</span>.floor(<span class="hljs-built_in">Math</span>.random()*(e-t+<span class="hljs-number">1</span>))};<span class="hljs-keyword">var</span> N={<span class="hljs-built_in">escape</span>:{<span class="hljs-string">"&amp;"</span>:<span class="hljs-string">"&amp;amp;"</span>,<span class="hljs-string">"&lt;"</span>:<span class="hljs-string">"&amp;lt;"</span>,<span class="hljs-string">"&gt;"</span>:<span class="hljs-string">"&amp;gt;"</span>,<span class="hljs-string">'"'</span>:<span class="hljs-string">"&amp;quot;"</span>,<span class="hljs-string">"'"</span>:<span class="hljs-string">"&amp;#x27;"</span>,<span class="hljs-string">"/"</span>:<span class="hljs-string">"&amp;#x2F;"</span>}};N.unescape=A.invert(N.escape);<span class="hljs-keyword">var</span> P={<span class="hljs-built_in">escape</span>:<span class="hljs-keyword">new</span> <span class="hljs-built_in">RegExp</span>(<span class="hljs-string">"["</span>+A.keys(N.escape).join(<span class="hljs-string">""</span>)+<span class="hljs-string">"]"</span>,<span class="hljs-string">"g"</span>),<span class="hljs-built_in">unescape</span>:<span class="hljs-keyword">new</span> <span class="hljs-built_in">RegExp</span>(<span class="hljs-string">"("</span>+A.keys(N.unescape).join(<span class="hljs-string">"|"</span>)+<span class="hljs-string">")"</span>,<span class="hljs-string">"g"</span>)};A.each([<span class="hljs-string">"escape"</span>,<span class="hljs-string">"unescape"</span>],<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{A[t]=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span></span>{<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>==e?<span class="hljs-string">""</span>:(<span class="hljs-string">""</span>+e).replace(P[t],<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span></span>{<span class="hljs-keyword">return</span> N[t][e]})}}),A.result=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e)</span></span>{<span class="hljs-keyword">if</span>(<span class="hljs-literal">null</span>==t)<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<span class="hljs-keyword">var</span> n=t[e];<span class="hljs-keyword">return</span> A.isFunction(n)?n.call(t):n},A.mixin=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{$(A.functions(t),<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span></span>{<span class="hljs-keyword">var</span> n=A[e]=t[e];A.prototype[e]=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{<span class="hljs-keyword">var</span> t=[<span class="hljs-keyword">this</span>._wrapped];<span class="hljs-keyword">return</span> s.apply(t,<span class="hljs-built_in">arguments</span>),K.call(<span class="hljs-keyword">this</span>,n.apply(A,t))}})};<span class="hljs-keyword">var</span> C=<span class="hljs-number">0</span>;A.uniqueId=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{<span class="hljs-keyword">var</span> e=++C+<span class="hljs-string">""</span>;<span class="hljs-keyword">return</span> t?t+e:e},A.templateSettings={evaluate:<span class="hljs-regexp">/&lt;%([\s\S]+?)%&gt;/g</span>,interpolate:<span class="hljs-regexp">/&lt;%=([\s\S]+?)%&gt;/g</span>,<span class="hljs-built_in">escape</span>:<span class="hljs-regexp">/&lt;%-([\s\S]+?)%&gt;/g</span>};<span class="hljs-keyword">var</span> I=<span class="hljs-regexp">/(.)^/</span>,F={<span class="hljs-string">"'"</span>:<span class="hljs-string">"'"</span>,<span class="hljs-string">"\\"</span>:<span class="hljs-string">"\\"</span>,<span class="hljs-string">"\r"</span>:<span class="hljs-string">"r"</span>,<span class="hljs-string">"\n"</span>:<span class="hljs-string">"n"</span>,<span class="hljs-string">"	"</span>:<span class="hljs-string">"t"</span>,<span class="hljs-string">"\u2028"</span>:<span class="hljs-string">"u2028"</span>,<span class="hljs-string">"\u2029"</span>:<span class="hljs-string">"u2029"</span>},q=<span class="hljs-regexp">/\\|'|\r|\n|\t|\u2028|\u2029/g</span>;A.template=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t,e,n)</span></span>{<span class="hljs-keyword">var</span> r;n=A.defaults({},n,A.templateSettings);<span class="hljs-keyword">var</span> i=<span class="hljs-keyword">new</span> <span class="hljs-built_in">RegExp</span>([(n.escape||I).source,(n.interpolate||I).source,(n.evaluate||I).source].join(<span class="hljs-string">"|"</span>)+<span class="hljs-string">"|$"</span>,<span class="hljs-string">"g"</span>),o=<span class="hljs-number">0</span>,u=<span class="hljs-string">"__p+='"</span>;t.replace(i,<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e,n,r,i,a)</span></span>{<span class="hljs-keyword">return</span> u+=t.slice(o,a).replace(q,<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{<span class="hljs-keyword">return</span><span class="hljs-string">"\\"</span>+F[t]}),n&amp;&amp;(u+=<span class="hljs-string">"'+\n((__t=("</span>+n+<span class="hljs-string">"))==null?'':_.escape(__t))+\n'"</span>),r&amp;&amp;(u+=<span class="hljs-string">"'+\n((__t=("</span>+r+<span class="hljs-string">"))==null?'':__t)+\n'"</span>),i&amp;&amp;(u+=<span class="hljs-string">"';\n"</span>+i+<span class="hljs-string">"\n__p+='"</span>),o=a+e.length,e}),u+=<span class="hljs-string">"';\n"</span>,n.variable||(u=<span class="hljs-string">"with(obj||{}){\n"</span>+u+<span class="hljs-string">"}\n"</span>),u=<span class="hljs-string">"var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"</span>+u+<span class="hljs-string">"return __p;\n"</span>;<span class="hljs-keyword">try</span>{r=<span class="hljs-keyword">new</span> <span class="hljs-built_in">Function</span>(n.variable||<span class="hljs-string">"obj"</span>,<span class="hljs-string">"_"</span>,u)}<span class="hljs-keyword">catch</span>(a){<span class="hljs-keyword">throw</span> a.source=u,a}<span class="hljs-keyword">if</span>(e)<span class="hljs-keyword">return</span> r(e,A);<span class="hljs-keyword">var</span> s=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{<span class="hljs-keyword">return</span> r.call(<span class="hljs-keyword">this</span>,t,A)};<span class="hljs-keyword">return</span> s.source=<span class="hljs-string">"function("</span>+(n.variable||<span class="hljs-string">"obj"</span>)+<span class="hljs-string">"){\n"</span>+u+<span class="hljs-string">"}"</span>,s},A.chain=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{<span class="hljs-keyword">return</span> A(t).chain()};<span class="hljs-keyword">var</span> K=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._chain?A(t).chain():t};A.mixin(A),$([<span class="hljs-string">"pop"</span>,<span class="hljs-string">"push"</span>,<span class="hljs-string">"reverse"</span>,<span class="hljs-string">"shift"</span>,<span class="hljs-string">"sort"</span>,<span class="hljs-string">"splice"</span>,<span class="hljs-string">"unshift"</span>],<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{<span class="hljs-keyword">var</span> e=o[t];A.prototype[t]=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{<span class="hljs-keyword">var</span> n=<span class="hljs-keyword">this</span>._wrapped;<span class="hljs-keyword">return</span> e.apply(n,<span class="hljs-built_in">arguments</span>),<span class="hljs-string">"shift"</span>!=t&amp;&amp;<span class="hljs-string">"splice"</span>!=t||<span class="hljs-number">0</span>!==n.length||<span class="hljs-keyword">delete</span> n[<span class="hljs-number">0</span>],K.call(<span class="hljs-keyword">this</span>,n)}}),$([<span class="hljs-string">"concat"</span>,<span class="hljs-string">"join"</span>,<span class="hljs-string">"slice"</span>],<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t)</span></span>{<span class="hljs-keyword">var</span> e=o[t];A.prototype[t]=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{<span class="hljs-keyword">return</span> K.call(<span class="hljs-keyword">this</span>,e.apply(<span class="hljs-keyword">this</span>._wrapped,<span class="hljs-built_in">arguments</span>))}}),A.extend(A.prototype,{chain:<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._chain=!<span class="hljs-number">0</span>,<span class="hljs-keyword">this</span>},value:<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._wrapped}})}.call(<span class="hljs-keyword">this</span>)},{}]},{},[<span class="hljs-number">6</span>])(<span class="hljs-number">6</span>)});</pre></div></div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
